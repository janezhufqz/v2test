!function(e){var t={};function __webpack_require__(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,__webpack_require__),o.l=!0,o.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)__webpack_require__.d(n,o,function(t){return e[t]}.bind(null,o));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=89)}([function(e,t,n){e.exports=n(82)(1)},function(e,t,n){e.exports=n(7)(0)},function(e,t,n){"use strict";n(19);var o=n(20);n.d(t,"AssetsService",function(){return o.a});var i=n(21);n.d(t,"CMSModesService",function(){return i.a});var r=n(14);n.d(t,"TypePermissionsRestService",function(){return r.a});var s=n(22);n.d(t,"AttributePermissionsRestService",function(){return s.a});var a=n(23);n.d(t,"CMSTimeService",function(){return a.a});n(24);var c=n(10);n.d(t,"IPageContentSlotsComponentsRestService",function(){return c.a});var l=n(25);n.d(t,"IComponentSharedService",function(){return l.a});var d=n(12);n.o(d,"CmsCommonsModule")&&n.d(t,"CmsCommonsModule",function(){return d.CmsCommonsModule}),n.o(d,"CmsConstantsModule")&&n.d(t,"CmsConstantsModule",function(){return d.CmsConstantsModule}),n.o(d,"CmsResourceLocationsModule")&&n.d(t,"CmsResourceLocationsModule",function(){return d.CmsResourceLocationsModule}),n.o(d,"ComponentService")&&n.d(t,"ComponentService",function(){return d.ComponentService}),n.o(d,"IContextAwareEditableItemService")&&n.d(t,"IContextAwareEditableItemService",function(){return d.IContextAwareEditableItemService}),n.o(d,"IPageService")&&n.d(t,"IPageService",function(){return d.IPageService}),n.o(d,"SlotStatus")&&n.d(t,"SlotStatus",function(){return d.SlotStatus}),n.o(d,"SynchronizationPanelModule")&&n.d(t,"SynchronizationPanelModule",function(){return d.SynchronizationPanelModule}),n.o(d,"SynchronizationService")&&n.d(t,"SynchronizationService",function(){return d.SynchronizationService}),n.o(d,"TYPES_RESOURCE_URI")&&n.d(t,"TYPES_RESOURCE_URI",function(){return d.TYPES_RESOURCE_URI}),n.o(d,"slotEvictionTag")&&n.d(t,"slotEvictionTag",function(){return d.slotEvictionTag});var u=n(30);n.o(u,"CmsCommonsModule")&&n.d(t,"CmsCommonsModule",function(){return u.CmsCommonsModule}),n.o(u,"CmsConstantsModule")&&n.d(t,"CmsConstantsModule",function(){return u.CmsConstantsModule}),n.o(u,"CmsResourceLocationsModule")&&n.d(t,"CmsResourceLocationsModule",function(){return u.CmsResourceLocationsModule}),n.o(u,"ComponentService")&&n.d(t,"ComponentService",function(){return u.ComponentService}),n.o(u,"IContextAwareEditableItemService")&&n.d(t,"IContextAwareEditableItemService",function(){return u.IContextAwareEditableItemService}),n.o(u,"IPageService")&&n.d(t,"IPageService",function(){return u.IPageService}),n.o(u,"SlotStatus")&&n.d(t,"SlotStatus",function(){return u.SlotStatus}),n.o(u,"SynchronizationPanelModule")&&n.d(t,"SynchronizationPanelModule",function(){return u.SynchronizationPanelModule}),n.o(u,"SynchronizationService")&&n.d(t,"SynchronizationService",function(){return u.SynchronizationService}),n.o(u,"TYPES_RESOURCE_URI")&&n.d(t,"TYPES_RESOURCE_URI",function(){return u.TYPES_RESOURCE_URI}),n.o(u,"slotEvictionTag")&&n.d(t,"slotEvictionTag",function(){return u.slotEvictionTag});var p=n(6);n.d(t,"CmsResourceLocationsModule",function(){return p.c}),n.d(t,"TYPES_RESOURCE_URI",function(){return p.g});var m=n(39);n.d(t,"CmsConstantsModule",function(){return m.a});var S=n(40);n.d(t,"CmsCommonsModule",function(){return S.a});var h=n(41);n.o(h,"ComponentService")&&n.d(t,"ComponentService",function(){return h.ComponentService}),n.o(h,"IContextAwareEditableItemService")&&n.d(t,"IContextAwareEditableItemService",function(){return h.IContextAwareEditableItemService}),n.o(h,"IPageService")&&n.d(t,"IPageService",function(){return h.IPageService}),n.o(h,"SlotStatus")&&n.d(t,"SlotStatus",function(){return h.SlotStatus}),n.o(h,"SynchronizationPanelModule")&&n.d(t,"SynchronizationPanelModule",function(){return h.SynchronizationPanelModule}),n.o(h,"SynchronizationService")&&n.d(t,"SynchronizationService",function(){return h.SynchronizationService}),n.o(h,"slotEvictionTag")&&n.d(t,"slotEvictionTag",function(){return h.slotEvictionTag})},function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"b",function(){return r}),n.d(t,"a",function(){return s}),n.d(t,"d",function(){return o});n(83);var o,i={UNAVAILABLE:"UNAVAILABLE",IN_SYNC:"IN_SYNC",NOT_SYNC:"NOT_SYNC",IN_PROGRESS:"IN_PROGRESS",SYNC_FAILED:"SYNC_FAILED"},r={SLOW_POLLING_TIME:2e4,FAST_POLLING_TIME:4e3,SPEED_UP:"syncPollingSpeedUp",SLOW_DOWN:"syncPollingSlowDown",FAST_FETCH:"syncFastFetch",FETCH_SYNC_STATUS_ONCE:"fetchSyncStatusOnce"},s={CATALOG_SYNCHRONIZED:"CATALOG_SYNCHRONIZED_EVENT"};!function(e){e.Unavailable="UNAVAILABLE",e.InSync="IN_SYNC",e.NotSync="NOT_SYNC",e.InProgress="IN_PROGRESS",e.SyncFailed="SYNC_FAILED"}(o||(o={}))},function(e,t){e.exports=angular},function(e,t,n){e.exports=n(7)(1)},function(e,t,n){"use strict";n.d(t,"c",function(){return y}),n.d(t,"a",function(){return r}),n.d(t,"b",function(){return s}),n.d(t,"g",function(){return d}),n.d(t,"f",function(){return p}),n.d(t,"d",function(){return f.a}),n.d(t,"e",function(){return _.a});var o=n(1),i=n(0),r="CURRENT_CONTEXT_CATALOG",s="CURRENT_CONTEXT_CATALOG_VERSION",a="CURRENT_CONTEXT_SITE_ID",c="CURRENT_PAGE_CONTEXT_CATALOG",l="CURRENT_PAGE_CONTEXT_CATALOG_VERSION",d="/cmswebservices/v1/types",u="/cmswebservices/v1/sites/"+a+"/catalogs/"+r+"/versions/"+s+"/items",p="/cmswebservices/v1/sites/CURRENT_PAGE_CONTEXT_SITE_ID/catalogs/"+c+"/versions/"+l+"/pagescontentslotscomponents",m="/cmswebservices/v1/sites/"+a+"/catalogs/"+r+"/versions/"+s+"/pages",S="/cmswebservices/v1/sites/:"+a+"/catalogs/:"+r+"/versions/:"+s+"/pagetemplates",h="/cmswebservices/v1/sites/:"+a+"/catalogs/:"+r+"/versions/:"+s+"/navigations",v="/cmswebservices/v1/sites/:"+a+"/catalogs/:"+r+"/versions/:"+s+"/navigations/:navigationUid/entries",g="/cmssmarteditwebservices/v1/sites/"+a+"/catalogs/"+r+"/versions/"+s+"/synchronizations/versions/:target",y=function(){function CmsResourceLocationsModule(){}return CmsResourceLocationsModule=o.__decorate([Object(i.SeModule)({providers:[i.diNameUtils.makeValueProvider({CONTEXT_SITE_ID:a}),i.diNameUtils.makeValueProvider({CONTEXT_CATALOG:r}),i.diNameUtils.makeValueProvider({CONTEXT_CATALOG_VERSION:s}),i.diNameUtils.makeValueProvider({PAGE_CONTEXT_SITE_ID:"CURRENT_PAGE_CONTEXT_SITE_ID"}),i.diNameUtils.makeValueProvider({PAGE_CONTEXT_CATALOG:c}),i.diNameUtils.makeValueProvider({PAGE_CONTEXT_CATALOG_VERSION:l}),i.diNameUtils.makeValueProvider({TYPES_RESOURCE_URI:d}),i.diNameUtils.makeValueProvider({ITEMS_RESOURCE_URI:u}),i.diNameUtils.makeValueProvider({PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI:p}),i.diNameUtils.makeValueProvider({CONTENT_SLOT_TYPE_RESTRICTION_RESOURCE_URI:"/cmswebservices/v1/catalogs/CURRENT_PAGE_CONTEXT_CATALOG/versions/CURRENT_PAGE_CONTEXT_CATALOG_VERSION/pages/:pageUid/contentslots/:slotUid/typerestrictions"}),i.diNameUtils.makeValueProvider({CONTENT_SLOTS_TYPE_RESTRICTION_RESOURCE_URI:"/cmswebservices/v1/catalogs/CURRENT_PAGE_CONTEXT_CATALOG/versions/CURRENT_PAGE_CONTEXT_CATALOG_VERSION/pages/:pageUid/typerestrictions"}),i.diNameUtils.makeValueProvider({PAGES_LIST_RESOURCE_URI:m}),i.diNameUtils.makeValueProvider({PAGE_LIST_PATH:"/pages/:siteId/:catalogId/:catalogVersion"}),i.diNameUtils.makeValueProvider({TRASHED_PAGE_LIST_PATH:"/trashedpages/:siteId/:catalogId/:catalogVersion"}),i.diNameUtils.makeValueProvider({PAGES_CONTENT_SLOT_RESOURCE_URI:"/cmswebservices/v1/sites/CURRENT_PAGE_CONTEXT_SITE_ID/catalogs/CURRENT_PAGE_CONTEXT_CATALOG/versions/CURRENT_PAGE_CONTEXT_CATALOG_VERSION/pagescontentslots"}),i.diNameUtils.makeValueProvider({PAGE_TEMPLATES_URI:S}),i.diNameUtils.makeValueProvider({NAVIGATION_MANAGEMENT_PAGE_PATH:"/navigations/:siteId/:catalogId/:catalogVersion"}),i.diNameUtils.makeValueProvider({NAVIGATION_MANAGEMENT_RESOURCE_URI:h}),i.diNameUtils.makeValueProvider({NAVIGATION_MANAGEMENT_ENTRIES_RESOURCE_URI:v}),i.diNameUtils.makeValueProvider({NAVIGATION_MANAGEMENT_ENTRY_TYPES_RESOURCE_URI:"/cmswebservices/v1/navigationentrytypes"}),i.diNameUtils.makeValueProvider({CONTEXTUAL_PAGES_RESTRICTIONS_RESOURCE_URI:"/cmswebservices/v1/sites/CURRENT_PAGE_CONTEXT_SITE_ID/catalogs/CURRENT_PAGE_CONTEXT_CATALOG/versions/CURRENT_PAGE_CONTEXT_CATALOG_VERSION/pagesrestrictions"}),i.diNameUtils.makeValueProvider({PAGES_RESTRICTIONS_RESOURCE_URI:"/cmswebservices/v1/sites/:siteUID/catalogs/:catalogId/versions/:catalogVersion/pagesrestrictions"}),i.diNameUtils.makeValueProvider({RESTRICTION_TYPES_URI:"/cmswebservices/v1/restrictiontypes"}),i.diNameUtils.makeValueProvider({PAGE_TYPES_RESTRICTION_TYPES_URI:"/cmswebservices/v1/pagetypesrestrictiontypes"}),i.diNameUtils.makeValueProvider({PAGE_TYPES_URI:"/cmswebservices/v1/pagetypes"}),i.diNameUtils.makeValueProvider({GET_PAGE_SYNCHRONIZATION_RESOURCE_URI:"/cmssmarteditwebservices/v1/sites/CURRENT_PAGE_CONTEXT_SITE_ID/catalogs/CURRENT_PAGE_CONTEXT_CATALOG/versions/CURRENT_PAGE_CONTEXT_CATALOG_VERSION/synchronizations/versions/:target/pages/:pageUid"}),i.diNameUtils.makeValueProvider({POST_PAGE_SYNCHRONIZATION_RESOURCE_URI:g})]})],CmsResourceLocationsModule)}(),f=n(9),_=n(10)},function(e,t){e.exports=vendor_chunk},function(e,t,n){e.exports=n(7)(253)},function(e,t,n){"use strict";n.d(t,"c",function(){return s}),n.d(t,"b",function(){return a}),n.d(t,"a",function(){return c});var o=n(1),i=n(8),r=n(0),s="/cmswebservices/v1/sites/"+r.CONTEXT_SITE_ID+"/cmsitems",a=new r.EvictionTag({event:"CMSITEMS_UPDATE"}),c=function(){function CmsitemsRestService(e,t){this.restServiceFactory=e,this.catalogService=t,this.cmsitemsUuidsUri="/cmswebservices/v1/sites/"+r.CONTEXT_SITE_ID+"/cmsitems/uuids",this.resource=e.get(s),this.versionedResource=e.get(s+"/:itemUuid"),this.uuidsResource=e.get(this.cmsitemsUuidsUri)}var e,t,n,c,l,d,u,p,m;return CmsitemsRestService.$inject=["restServiceFactory","catalogService"],CmsitemsRestService.prototype.create=function(e){var t=this;return this.catalogService.getCatalogVersionUUid().then(function(n){return e.catalogVersion=e.catalogVersion||n,void 0===e.onlyOneRestrictionMustApply&&(e.onlyOneRestrictionMustApply=!1),t.resource.save(e)})},CmsitemsRestService.prototype.getById=function(e){return this.resource.getById(e)},CmsitemsRestService.prototype.getByIdAndVersion=function(e,t){return this.versionedResource.get({itemUuid:e,versionId:t})},CmsitemsRestService.prototype.get=function(e){var t=this;return this.catalogService.retrieveUriContext().then(function(n){var o={catalogId:e.catalogId||n.CURRENT_CONTEXT_CATALOG,catalogVersion:e.catalogVersion||n.CURRENT_CONTEXT_CATALOG_VERSION};return e=i.merge(o,e),t.restServiceFactory.get(s).get(e)})},CmsitemsRestService.prototype.getByIds=function(e){var t=this;return e=Array.from(new Set(e)),this.catalogService.getCatalogVersionUUid().then(function(n){return t.uuidsResource.save({catalogVersion:n,uuids:e})})},CmsitemsRestService.prototype.update=function(e){return this.resource.update(e)},CmsitemsRestService.prototype.delete=function(e){return this.resource.remove({identifier:e})},o.__decorate([Object(r.Cached)({actions:[r.rarelyChangingContent],tags:[r.userEvictionTag,a]}),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[String]),o.__metadata("design:returntype","function"==typeof(e="undefined"!=typeof Promise&&Promise)?e:Object)],CmsitemsRestService.prototype,"getById",null),o.__decorate([Object(r.Cached)({actions:[r.rarelyChangingContent],tags:[r.userEvictionTag,a]}),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[String,String]),o.__metadata("design:returntype","function"==typeof(t="undefined"!=typeof Promise&&Promise)?t:Object)],CmsitemsRestService.prototype,"getByIdAndVersion",null),o.__decorate([Object(r.Cached)({actions:[r.rarelyChangingContent],tags:[r.userEvictionTag,a]}),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Object]),o.__metadata("design:returntype","function"==typeof(n="undefined"!=typeof Promise&&Promise)?n:Object)],CmsitemsRestService.prototype,"get",null),o.__decorate([Object(r.Cached)({actions:[r.rarelyChangingContent],tags:[r.userEvictionTag,a]}),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Array]),o.__metadata("design:returntype","function"==typeof(c="undefined"!=typeof Promise&&Promise)?c:Object)],CmsitemsRestService.prototype,"getByIds",null),o.__decorate([Object(r.InvalidateCache)(a),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",["function"==typeof(l="undefined"!=typeof T&&T)?l:Object]),o.__metadata("design:returntype","function"==typeof(d="undefined"!=typeof Promise&&Promise)?d:Object)],CmsitemsRestService.prototype,"update",null),o.__decorate([Object(r.InvalidateCache)(a),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[String]),o.__metadata("design:returntype","function"==typeof(u="undefined"!=typeof Promise&&Promise)?u:Object)],CmsitemsRestService.prototype,"delete",null),CmsitemsRestService=o.__decorate([Object(r.SeDowngradeService)(),Object(r.OperationContextRegistered)(s.replace(/CONTEXT_SITE_ID/,":CONTEXT_SITE_ID"),"CMS"),o.__metadata("design:paramtypes",["function"==typeof(p=void 0!==r.RestServiceFactory&&r.RestServiceFactory)?p:Object,"function"==typeof(m=void 0!==r.ICatalogService&&r.ICatalogService)?m:Object])],CmsitemsRestService)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){function IPageContentSlotsComponentsRestService(){}return IPageContentSlotsComponentsRestService.prototype.clearCache=function(){"proxyFunction"},IPageContentSlotsComponentsRestService.prototype.getSlotsToComponentsMapForPageUid=function(e){"proxyFunction";return null},IPageContentSlotsComponentsRestService.prototype.getComponentsForSlot=function(e){"proxyFunction";return null},IPageContentSlotsComponentsRestService}()},function(e,t,n){e.exports=n(7)(250)},function(e,t,n){"use strict";var o=n(48);n.d(t,"IPageService",function(){return o.a});var i=n(26);n.o(i,"CmsCommonsModule")&&n.d(t,"CmsCommonsModule",function(){return i.CmsCommonsModule}),n.o(i,"CmsConstantsModule")&&n.d(t,"CmsConstantsModule",function(){return i.CmsConstantsModule}),n.o(i,"CmsResourceLocationsModule")&&n.d(t,"CmsResourceLocationsModule",function(){return i.CmsResourceLocationsModule}),n.o(i,"ComponentService")&&n.d(t,"ComponentService",function(){return i.ComponentService}),n.o(i,"IContextAwareEditableItemService")&&n.d(t,"IContextAwareEditableItemService",function(){return i.IContextAwareEditableItemService}),n.o(i,"SlotStatus")&&n.d(t,"SlotStatus",function(){return i.SlotStatus}),n.o(i,"SynchronizationPanelModule")&&n.d(t,"SynchronizationPanelModule",function(){return i.SynchronizationPanelModule}),n.o(i,"SynchronizationService")&&n.d(t,"SynchronizationService",function(){return i.SynchronizationService}),n.o(i,"TYPES_RESOURCE_URI")&&n.d(t,"TYPES_RESOURCE_URI",function(){return i.TYPES_RESOURCE_URI}),n.o(i,"slotEvictionTag")&&n.d(t,"slotEvictionTag",function(){return i.slotEvictionTag});var r=n(47);n.d(t,"slotEvictionTag",function(){return r.a});var s=n(27);n.d(t,"IContextAwareEditableItemService",function(){return s.a});var a=n(28);n.d(t,"ComponentService",function(){return a.a});var c=n(29);n.d(t,"SynchronizationService",function(){return c.a})},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(1),i=n(4),r=n(11),s=n(0),a=n(3);window.__smartedit__.addDecoratorPayload("SeComponent","SynchronizationPanelComponent",{templateUrl:"synchronizationPanelTemplate.html",inputs:["itemId","getSyncStatus","performSync","headerTemplateUrl","syncItems:=?","onSelectedItemsUpdate","onSyncStatusReady:&?","getApi:&?"]});var c=function(){function SynchronizationPanelComponent(e,t,n,o,i,r,s,c,l,d,u){var p=this;this.logService=e,this.$attrs=t,this.translateService=n,this.alertService=o,this.systemEventService=i,this.timerService=r,this.crossFrameEventService=s,this.catalogService=c,this.l10nFilter=l,this.sharedDataService=d,this.waitDialogService=u,this.isLoading=!1,this.message=null,this.showItemList=!0,this.disableList=!1,this.syncPendingItems=[],this.selectedItems=[],this.refreshInterval=a.b.SLOW_POLLING_TIME,this.api={selectAll:function(){if(!p.syncStatus)throw new Error("Synchronization status is not available. The 'selectAll' function should be used with 'onSyncStatusReady' event.");p.syncStatus.selected=!0,p.selectionChange(0)},displayItemList:function(e){p.showItemList=e},disableItemList:function(e){p.disableList=e},setMessage:function(e){p.message=e},disableItem:null}}var e,t,n,c,l,d,u,p,m,S,h;return SynchronizationPanelComponent.$inject=["logService","$attrs","translateService","alertService","systemEventService","timerService","crossFrameEventService","catalogService","l10nFilter","sharedDataService","waitDialogService"],SynchronizationPanelComponent.prototype.$onInit=function(){var e=this;this.syncItems=function(){var t=e.getRows().filter(function(e){return e.selected}).map(function(e){return{itemId:e.itemId,itemType:e.itemType}});return Array.prototype.push.apply(e.syncPendingItems,t.map(function(e){return e.itemId})),e.selectedItems.length?(e.waitDialogService.showWaitModal("se.sync.synchronizing"),e.performSync(t).then(function(){e.refreshInterval=a.b.FAST_POLLING_TIME,e.resynchTimer.restart(e.refreshInterval),e.systemEventService.publishAsync(a.b.SPEED_UP,e.itemId)},function(){e.logService.warn("[synchronizationPanel] - Could not perform synchronization."),e.waitDialogService.hideWaitModal()})):Promise.resolve()},"function"==typeof this.getApi&&this.getApi({$api:this.api}),this.unsubscribeFastFetch=this.crossFrameEventService.subscribe(a.b.FAST_FETCH,function(t,n){return e.fetchSyncStatus(t,n)}),this.fetchSyncStatus(),this.resynchTimer=this.timerService.createTimer(function(){return e.fetchSyncStatus()},this.refreshInterval),this.resynchTimer.start()},SynchronizationPanelComponent.prototype.$onDestroy=function(){this.resynchTimer.teardown(),this.unsubscribeFastFetch(),this.systemEventService.publishAsync(a.b.SLOW_DOWN,this.itemId)},SynchronizationPanelComponent.prototype.$postLink=function(){this.showSyncButton=s.stringUtils.isBlank(this.$attrs.syncItems)},SynchronizationPanelComponent.prototype.getRows=function(){return this.syncStatus?[this.syncStatus].concat(this.syncStatus.selectedDependencies):[]},SynchronizationPanelComponent.prototype.selectionChange=function(e){this.syncStatus.selectedDependencies.forEach(function(t){t.selected=0===e&&t.status!==a.d.InSync&&!t.isExternal||t.selected}),this.selectedItems=this.getRows().filter(function(e){return e.selected}),this.onSelectedItemsUpdate&&this.onSelectedItemsUpdate(this.selectedItems)},SynchronizationPanelComponent.prototype.preserveSelection=function(e){var t=(e||[]).map(function(e){return e.itemId},[]);this.getRows().forEach(function(e){e.selected=t.indexOf(e.itemId)>-1&&e.status!==a.d.InSync})},SynchronizationPanelComponent.prototype.isDisabled=function(e){return!!(this.disableList||this.api.disableItem&&this.api.disableItem(e))||(e!==this.syncStatus&&this.syncStatus.selected||e.status===a.d.InSync)},SynchronizationPanelComponent.prototype.isSyncButtonDisabled=function(){return this.disableList||0===this.selectedItems.length||0!==this.syncPendingItems.length},SynchronizationPanelComponent.prototype.isInSync=function(e){return e.status===a.d.InSync},SynchronizationPanelComponent.prototype.isOutOfSync=function(e){return e.status===a.d.NotSync},SynchronizationPanelComponent.prototype.isInProgress=function(e){return e.status===a.d.InProgress},SynchronizationPanelComponent.prototype.isSyncFailed=function(e){return e.status===a.d.SyncFailed},SynchronizationPanelComponent.prototype.hasHelp=function(e){return e.dependentItemTypesOutOfSync&&e.dependentItemTypesOutOfSync.length>0},SynchronizationPanelComponent.prototype.buildInfoTemplate=function(e){var t=this;if(e&&e.dependentItemTypesOutOfSync&&!e.isExternal){var n=e.dependentItemTypesOutOfSync.reduce(function(e,n){return e+="<div>"+t.translateService.instant(n.i18nKey)+"</div>"},"");return n?"<div>"+n+"</div>":""}return e.isExternal?e.catalogVersionNameTemplate:""},SynchronizationPanelComponent.prototype.fetchSyncStatus=function(e,t){return o.__awaiter(this,void 0,Promise,function(){var e,n,i;return o.__generator(this,function(o){switch(o.label){case 0:return t&&t.itemId!==this.itemId?[2]:(this.isLoading=!0,[4,this.getSyncStatus(this.itemId)]);case 1:return e=o.sent(),[4,this.sharedDataService.get("experience")];case 2:return n=o.sent(),i=e.catalogVersionUuid,this.syncStatus=e,this.preserveSelection(this.selectedItems),this.selectionChange(),this._updateStatus(),this.markExternalComponents(i,this.getRows()),this.setTemplateExternalCatalogVersionName(n,this.getRows()),0===this.syncPendingItems.length&&(this.refreshInterval=a.b.SLOW_POLLING_TIME,this.resynchTimer.restart(this.refreshInterval),this.systemEventService.publishAsync(a.b.SLOW_DOWN,this.itemId)),"function"==typeof this.onSyncStatusReady&&this.onSyncStatusReady({$syncStatus:e}),this.isLoading=!1,[2]}})})},SynchronizationPanelComponent.prototype.markExternalComponents=function(e,t){t.forEach(function(t){t.isExternal=t.catalogVersionUuid!==e})},SynchronizationPanelComponent.prototype.getInfoTitle=function(e){return e.isExternal?"":"se.cms.synchronization.panel.update.title"},SynchronizationPanelComponent.prototype.getTemplateInfoForExternalComponent=function(){return"<div>"+this.translateService.instant("se.cms.synchronization.slot.external.component")+"</div>"},SynchronizationPanelComponent.prototype.setTemplateExternalCatalogVersionName=function(e,t){return o.__awaiter(this,void 0,Promise,function(){var n,i,r,s;return o.__generator(this,function(o){switch(o.label){case 0:n=0,i=t,o.label=1;case 1:return n<i.length?((r=i[n]).catalogVersionNameTemplate="<span></span>",[4,this.catalogService.getCatalogVersionByUuid(r.catalogVersionUuid,e.siteDescriptor.uid)]):[3,4];case 2:s=o.sent(),r.catalogVersionNameTemplate="<div>"+this.l10nFilter(s.catalogName)+"</div>",o.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},SynchronizationPanelComponent.prototype._updateStatus=function(){var e=this,t=!1,n="",o=this.syncPendingItems.length;this.getRows().forEach(function(i){var r=e.syncPendingItems.indexOf(i.itemId);r>-1&&i.status===a.d.SyncFailed&&(n=" "+n+i.itemId,t=!0),r>-1&&i.status!==a.d.InProgress&&i.status!==a.d.NotSync&&e.syncPendingItems.splice(r,1);var c=o&&0===e.syncPendingItems.length;(c||0===o)&&(c&&(e.systemEventService.publishAsync(s.EVENT_CONTENT_CATALOG_UPDATE),o=0),e.waitDialogService.hideWaitModal()),i.status===a.d.InProgress&&-1===e.syncPendingItems.indexOf(i.itemId)&&e.syncPendingItems.push(i.itemId)}),t&&this.alertService.showDanger({message:this.translateService.instant("se.cms.synchronization.panel.failure.message",{items:n})})},SynchronizationPanelComponent=o.__decorate([Object(s.SeComponent)({templateUrl:"synchronizationPanelTemplate.html",inputs:["itemId","getSyncStatus","performSync","headerTemplateUrl","syncItems:=?","onSelectedItemsUpdate","onSyncStatusReady:&?","getApi:&?"]}),o.__metadata("design:paramtypes",["function"==typeof(e=void 0!==s.LogService&&s.LogService)?e:Object,"function"==typeof(t=void 0!==i&&i.IAttributes)?t:Object,"function"==typeof(n=void 0!==r.TranslateService&&r.TranslateService)?n:Object,"function"==typeof(c=void 0!==s.IAlertService&&s.IAlertService)?c:Object,"function"==typeof(l=void 0!==s.SystemEventService&&s.SystemEventService)?l:Object,"function"==typeof(d=void 0!==s.TimerService&&s.TimerService)?d:Object,"function"==typeof(u=void 0!==s.CrossFrameEventService&&s.CrossFrameEventService)?u:Object,"function"==typeof(p=void 0!==s.ICatalogService&&s.ICatalogService)?p:Object,"function"==typeof(m=void 0!==s.L10nFilterFn&&s.L10nFilterFn)?m:Object,"function"==typeof(S=void 0!==s.ISharedDataService&&s.ISharedDataService)?S:Object,"function"==typeof(h=void 0!==s.IWaitDialogService&&s.IWaitDialogService)?h:Object])],SynchronizationPanelComponent)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o,i=n(1),r=n(0);!function(e){e.CREATE="create",e.READ="read",e.CHANGE="change",e.REMOVE="remove"}(o||(o={}));var s=function(){function TypePermissionsRestService(e,t,n){this.$log=e,this.sessionService=t,this.URI="/permissionswebservices/v1/permissions/principals/:user/types",this.resource=n.get(this.URI)}var e,t,n,s;return TypePermissionsRestService.$inject=["$log","sessionService","restServiceFactory"],TypePermissionsRestService.prototype.hasCreatePermissionForTypes=function(e){return this._getPermissionsForTypesAndName(e,o.CREATE)},TypePermissionsRestService.prototype.hasReadPermissionForTypes=function(e){return this._getPermissionsForTypesAndName(e,o.READ)},TypePermissionsRestService.prototype.hasUpdatePermissionForTypes=function(e){return this._getPermissionsForTypesAndName(e,o.CHANGE)},TypePermissionsRestService.prototype.hasDeletePermissionForTypes=function(e){return this._getPermissionsForTypesAndName(e,o.REMOVE)},TypePermissionsRestService.prototype.hasAllPermissionsForTypes=function(e){var t=this,n={};return this._getAllPermissionsForTypes(e).then(function(e){return e.reduce(function(e,n){return n.permissions&&(e[n.id]={},e[n.id][o.READ]=t._getPermissionByNameAndResult(n,o.READ),e[n.id][o.CHANGE]=t._getPermissionByNameAndResult(n,o.CHANGE),e[n.id][o.CREATE]=t._getPermissionByNameAndResult(n,o.CREATE),e[n.id][o.REMOVE]=t._getPermissionByNameAndResult(n,o.REMOVE)),e},n)})},TypePermissionsRestService.prototype._getPermissionByNameAndResult=function(e,t){return JSON.parse(e.permissions.find(function(e){return e.key===t}).value)},TypePermissionsRestService.prototype._getPermissionsForTypesAndName=function(e,t){var n=this;return this._getAllPermissionsForTypes(e).then(function(e){return e.reduce(function(e,o){return o.permissions&&(e[o.id]=n._getPermissionByNameAndResult(o,t)),e},{})})},TypePermissionsRestService.prototype._getAllPermissionsForTypes=function(e){var t=this;return e.length<=0?Promise.resolve([]):this.sessionService.getCurrentUsername().then(function(n){return n?t.resource.get({user:n,types:e.join(","),permissionNames:o.CREATE+","+o.CHANGE+","+o.READ+","+o.REMOVE}).then(function(e){return e.permissionsList||[]},function(n){return n&&t.$log.error("TypePermissionsRestService - no composed types "+e+" exist"),Promise.reject(n)}):[]})},i.__decorate([Object(r.Cached)({actions:[r.rarelyChangingContent],tags:[r.authorizationEvictionTag]}),i.__metadata("design:type",Function),i.__metadata("design:paramtypes",[Array]),i.__metadata("design:returntype","function"==typeof(e="undefined"!=typeof Promise&&Promise)?e:Object)],TypePermissionsRestService.prototype,"_getAllPermissionsForTypes",null),TypePermissionsRestService=i.__decorate([Object(r.SeInjectable)(),i.__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof angular&&angular.ILogService)?t:Object,"function"==typeof(n=void 0!==r.ISessionService&&r.ISessionService)?n:Object,"function"==typeof(s=void 0!==r.IRestServiceFactory&&r.IRestServiceFactory)?s:Object])],TypePermissionsRestService)}()},function(e,t,n){"use strict";var o=function isOldIE(){var e;return function memorize(){return void 0===e&&(e=Boolean(window&&document&&document.all&&!window.atob)),e}}(),i=function getTarget(){var e={};return function memorize(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),r=[];function getIndexByIdentifier(e){for(var t=-1,n=0;n<r.length;n++)if(r[n].identifier===e){t=n;break}return t}function modulesToDom(e,t){for(var n={},o=[],i=0;i<e.length;i++){var s=e[i],a=t.base?s[0]+t.base:s[0],c=n[a]||0,l="".concat(a," ").concat(c);n[a]=c+1;var d=getIndexByIdentifier(l),u={css:s[1],media:s[2],sourceMap:s[3]};-1!==d?(r[d].references++,r[d].updater(u)):r.push({identifier:l,updater:addStyle(u,t),references:1}),o.push(l)}return o}function insertStyleElement(e){var t=document.createElement("style"),o=e.attributes||{};if(void 0===o.nonce){var r=n.nc;r&&(o.nonce=r)}if(Object.keys(o).forEach(function(e){t.setAttribute(e,o[e])}),"function"==typeof e.insert)e.insert(t);else{var s=i(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var s=function replaceText(){var e=[];return function replace(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function applyToSingletonTag(e,t,n,o){var i=n?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(e.styleSheet)e.styleSheet.cssText=s(t,i);else{var r=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}var a=null,c=0;function addStyle(e,t){var n,o,i;if(t.singleton){var r=c++;n=a||(a=insertStyleElement(t)),o=applyToSingletonTag.bind(null,n,r,!1),i=applyToSingletonTag.bind(null,n,r,!0)}else n=insertStyleElement(t),o=function applyToTag(e,t,n){var o=n.css,i=n.media,r=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),r&&btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}.bind(null,n,t),i=function remove(){!function removeStyleElement(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return o(e),function updateStyle(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=o());var n=modulesToDom(e=e||[],t);return function update(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var o=0;o<n.length;o++){var i=getIndexByIdentifier(n[o]);r[i].references--}for(var s=modulesToDom(e,t),a=0;a<n.length;a++){var c=getIndexByIdentifier(n[a]);0===r[c].references&&(r[c].updater(),r.splice(c,1))}n=s}}}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function toString(){return this.map(function(t){var n=function cssWithMappingToString(e,t){var n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"==typeof btoa){var i=function toComment(e){var t=btoa(unescape(encodeURIComponent(JSON.stringify(e)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(t);return"/*# ".concat(n," */")}(o),r=o.sources.map(function(e){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(e," */")});return[n].concat(r).concat([i]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n}).join("")},t.i=function(e,n,o){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(o)for(var r=0;r<this.length;r++){var s=this[r][0];null!=s&&(i[s]=!0)}for(var a=0;a<e.length;a++){var c=[].concat(e[a]);o&&i[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},function(e,t){},function(e,t){e.exports=moment},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){function AssetsService(e){this.TEST_ASSETS_KEY="testAssets",this.TEST_ASSETS_SRC="/web/webroot",this.PROD_ASSETS_SRC="/cmssmartedit",this.$injector=e}return AssetsService.prototype.getAssetsRoot=function(){var e=!1;if(this.getInjector().has(this.TEST_ASSETS_KEY)){var t=this.getInjector().get(this.TEST_ASSETS_KEY);e="boolean"==typeof t&&t}return e?this.TEST_ASSETS_SRC:this.PROD_ASSETS_SRC},AssetsService.prototype.getInjector=function(){return this.$injector},AssetsService.$inject=["$injector"],AssetsService}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=n(1),i=n(0),r=function(){function CMSModesService(e){this.perspectiveService=e}var e;return CMSModesService.$inject=["perspectiveService"],e=CMSModesService,CMSModesService.prototype.isVersioningPerspectiveActive=function(){return this.perspectiveService.getActivePerspectiveKey().then(function(t){return t===e.VERSIONING_PERSPECTIVE_KEY})},CMSModesService.BASIC_PERSPECTIVE_KEY="se.cms.perspective.basic",CMSModesService.ADVANCED_PERSPECTIVE_KEY="se.cms.perspective.advanced",CMSModesService.VERSIONING_PERSPECTIVE_KEY="se.cms.perspective.versioning",CMSModesService=e=o.__decorate([Object(i.SeInjectable)(),o.__metadata("design:paramtypes",[Object])],CMSModesService)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o,i=n(1),r=n(8),s=n(0);!function(e){e.READ="read",e.CHANGE="change"}(o||(o={}));var a=function(){function AttributePermissionsRestService(e,t,n,o,i){this.sessionService=t,this.$q=n,this.$log=o,this.lodash=i,this.ATTRIBUTE_PERMISSIONS_URI="/permissionswebservices/v1/permissions/principals/:user/attributes",this.attributePermissionsRestService=e.get(this.ATTRIBUTE_PERMISSIONS_URI)}var e,t,n,a,c,l;return AttributePermissionsRestService.$inject=["restServiceFactory","sessionService","$q","$log","lodash"],AttributePermissionsRestService.prototype.hasReadPermissionOnAttributesInType=function(e,t){return this.getPermissionsForAttributesAndNameByType(e,t,o.READ)},AttributePermissionsRestService.prototype.hasChangePermissionOnAttributesInType=function(e,t){return this.getPermissionsForAttributesAndNameByType(e,t,o.CHANGE)},AttributePermissionsRestService.prototype.getPermissionsForAttributesAndNameByType=function(e,t,n){var o=t.map(function(t){return e+"."+t});return this.getPermissionsForAttributesAndName(o,n).then(function(t){return t[e]})},AttributePermissionsRestService.prototype.getPermissionsForAttributesAndName=function(e,t){var n=this;return this.getAllPermissionsForAttributes(e).then(function(o){return n.concatPermissionsNotFound(e,o).reduce(function(e,o){if(o.permissions){var i=n.parsePermissionsResultId(o.id);e[i.type]||(e[i.type]={}),e[i.type][i.attribute]=n.getPermissionByNameFromResult(o,t)}return e},{})})},AttributePermissionsRestService.prototype.parsePermissionsResultId=function(e){var t=e.split(".");if(2!==t.length)throw new Error("AttributePermissionsRestService - Received invalid attribute permissions");return{type:t[0],attribute:t[1]}},AttributePermissionsRestService.prototype.getPermissionByNameFromResult=function(e,t){return JSON.parse(e.permissions.find(function(e){return e.key===t}).value)},AttributePermissionsRestService.prototype.concatPermissionsNotFound=function(e,t){var n=t.map(function(e){return e.id}),i=this.lodash.difference(e,n);return t.concat(i.map(function(e){return{id:e,permissions:[{key:o.READ,value:"false"},{key:o.CHANGE,value:"false"}]}}))},AttributePermissionsRestService.prototype.getAllPermissionsForAttributes=function(e){var t=this;return e.length<=0?this.$q.when([]):this.$q.resolve(this.sessionService.getCurrentUsername()).then(function(n){return n?t.$q.when(t.attributePermissionsRestService.get({user:n,attributes:e.join(","),permissionNames:o.CHANGE+","+o.READ}).then(function(e){return e.permissionsList||[]},function(n){return n&&t.$log.error("AttributePermissionsRestService - couldn't retrieve attribute permissions "+e),t.$q.reject(n)})):[]})},i.__decorate([Object(s.Cached)({actions:[s.rarelyChangingContent],tags:[s.authorizationEvictionTag]}),i.__metadata("design:type",Function),i.__metadata("design:paramtypes",[Array]),i.__metadata("design:returntype","function"==typeof(e="undefined"!=typeof angular&&angular.IPromise)?e:Object)],AttributePermissionsRestService.prototype,"getAllPermissionsForAttributes",null),AttributePermissionsRestService=i.__decorate([Object(s.SeInjectable)(),i.__metadata("design:paramtypes",["function"==typeof(t=void 0!==s.IRestServiceFactory&&s.IRestServiceFactory)?t:Object,"function"==typeof(n=void 0!==s.ISessionService&&s.ISessionService)?n:Object,"function"==typeof(a="undefined"!=typeof angular&&angular.IQService)?a:Object,"function"==typeof(c="undefined"!=typeof angular&&angular.ILogService)?c:Object,"function"==typeof(l=void 0!==r&&r.LoDashStatic)?l:Object])],AttributePermissionsRestService)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(1),i=n(18),r=n(0),s=function(){function CMSTimeService(e){this.$translate=e}var e,t;return CMSTimeService.$inject=["$translate"],CMSTimeService.prototype.getTimeAgo=function(e){var t=Math.floor(i.duration(e).asDays()),n=Math.floor(i.duration(e).asHours());return t>=1?t+" "+this.$translate.instant("se.cms.actionitem.page.workflow.action.started.days.ago"):n>=1?n+" "+this.$translate.instant("se.cms.actionitem.page.workflow.action.started.hours.ago"):"<1 "+this.$translate.instant("se.cms.actionitem.page.workflow.action.started.hours.ago")},CMSTimeService=o.__decorate([Object(r.SeInjectable)(),o.__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof angular&&void 0!==(e=angular.translate)&&e.ITranslateService)?t:Object])],CMSTimeService)}()},function(e,t,n){"use strict";var o=n(1),i=n(5),r=n(49),s=n(90),a=n(0),c=n(2);!function(){function VersionExperienceInterceptor(e){this.sharedDataService=e}var e,t;VersionExperienceInterceptor.$inject=["sharedDataService"],e=VersionExperienceInterceptor,VersionExperienceInterceptor.prototype.intercept=function(t,n){return this.isGET(t)&&this.isPreviewDataTypeResourceEndpoint(t.url)?Object(r.from)(this.sharedDataService.get("experience")).pipe(Object(s.switchMap)(function(o){if(o.versionId){var i=t.clone({url:t.url.replace(e.MODE_DEFAULT,e.MODE_PREVIEW_VERSION)});return n.handle(i)}return n.handle(t)})):n.handle(t)},VersionExperienceInterceptor.prototype.isGET=function(e){return"GET"===e.method},VersionExperienceInterceptor.prototype.isPreviewDataTypeResourceEndpoint=function(t){return t.indexOf(c.TYPES_RESOURCE_URI)>-1&&t.indexOf(e.PREVIEW_DATA_TYPE)>-1},VersionExperienceInterceptor.MODE_DEFAULT="DEFAULT",VersionExperienceInterceptor.MODE_PREVIEW_VERSION="PREVIEWVERSION",VersionExperienceInterceptor.PREVIEW_DATA_TYPE="PreviewData",VersionExperienceInterceptor=e=o.__decorate([Object(i.Injectable)(),o.__metadata("design:paramtypes",["function"==typeof(t=void 0!==a.ISharedDataService&&a.ISharedDataService)?t:Object])],VersionExperienceInterceptor)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){function IComponentSharedService(){}return IComponentSharedService.prototype.isComponentShared=function(e){"proxyFunction";return null},IComponentSharedService}()},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){function IContextAwareEditableItemService(){}return IContextAwareEditableItemService.prototype.isItemEditable=function(e){"proxyFunction";return null},IContextAwareEditableItemService}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(1),i=n(0),r=n(6),s=function(){function ComponentService(e,t,n,o,i){this.restServiceFactory=e,this.cmsitemsRestService=t,this.catalogService=n,this.pageInfoService=o,this.pageContentSlotsComponentsRestService=i;this.pageComponentTypesRestService=this.restServiceFactory.get("/cmssmarteditwebservices/v1/catalogs/:catalogId/versions/:catalogVersion/pages/:pageId/types"),this.restServiceForAddExistingComponent=this.restServiceFactory.get(r.f)}var e,t,n,s,a,c;return ComponentService.$inject=["restServiceFactory","cmsitemsRestService","catalogService","pageInfoService","pageContentSlotsComponentsRestService"],ComponentService.prototype.createNewComponent=function(e,t){var n={name:e.name,slotId:e.targetSlotId,pageId:e.pageId,position:e.position,typeCode:e.componentType,itemtype:e.componentType,catalogVersion:e.catalogVersionUuid,uid:"",uuid:""};if("object"==typeof t)for(var o in t)t.hasOwnProperty(o)&&(n[o]=t[o]);else if(t)throw new Error("ComponentService.createNewComponent() - Illegal componentPayload - ["+t+"]");return this.cmsitemsRestService.create(n)},ComponentService.prototype.updateComponent=function(e){return this.cmsitemsRestService.update(e)},ComponentService.prototype.addExistingComponent=function(e,t,n,o){return this.restServiceForAddExistingComponent.save({pageId:e,slotId:n,componentId:t,position:o})},ComponentService.prototype.getSupportedComponentTypesForCurrentPage=function(e){return this.pageComponentTypesRestService.get(e)},ComponentService.prototype.loadComponentItem=function(e){return this.cmsitemsRestService.getById(e)},ComponentService.prototype.loadPagedComponentItems=function(e,t,n){var o=this;return this.catalogService.retrieveUriContext().then(function(i){var s={pageSize:t,currentPage:n,mask:e,sort:"name",typeCode:"AbstractCMSComponent",catalogId:i[r.a],catalogVersion:i[r.b],itemSearchParams:""};return o.cmsitemsRestService.get(s)})},ComponentService.prototype.loadPagedComponentItemsByCatalogVersion=function(e){var t={pageSize:e.pageSize,currentPage:e.page,mask:e.mask,sort:"name",typeCode:"AbstractCMSComponent",catalogId:e.catalogId,catalogVersion:e.catalogVersion,itemSearchParams:""};return this.cmsitemsRestService.get(t)},ComponentService.prototype.getSlotsForComponent=function(e){return o.__awaiter(this,void 0,Promise,function(){var t,n;return o.__generator(this,function(o){switch(o.label){case 0:return t=[],[4,this._getContentSlotsForComponents()];case 1:return n=o.sent(),Object.keys(n).forEach(function(o){n[o].find(function(t){return t.uuid===e})&&t.push(o)}),[2,t]}})})},ComponentService.prototype._getContentSlotsForComponents=function(){return o.__awaiter(this,void 0,Promise,function(){var e;return o.__generator(this,function(t){switch(t.label){case 0:return[4,this.pageInfoService.getPageUID()];case 1:return e=t.sent(),[4,this.pageContentSlotsComponentsRestService.getSlotsToComponentsMapForPageUid(e)];case 2:return[2,t.sent()]}})})},o.__decorate([Object(i.Cached)({actions:[i.rarelyChangingContent],tags:[i.pageChangeEvictionTag]}),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Object]),o.__metadata("design:returntype","function"==typeof(e="undefined"!=typeof Promise&&Promise)?e:Object)],ComponentService.prototype,"getSupportedComponentTypesForCurrentPage",null),ComponentService=o.__decorate([Object(i.SeInjectable)(),o.__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.RestServiceFactory&&i.RestServiceFactory)?t:Object,"function"==typeof(n=void 0!==r.d&&r.d)?n:Object,"function"==typeof(s=void 0!==i.ICatalogService&&i.ICatalogService)?s:Object,"function"==typeof(a=void 0!==i.IPageInfoService&&i.IPageInfoService)?a:Object,"function"==typeof(c=void 0!==r.e&&r.e)?c:Object])],ComponentService)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(1),i=n(11),r=n(0),s=n(3),a=function(){function SynchronizationService(e,t,n,o,i,r){this.restServiceFactory=e,this.timerService=t,this.translateService=n,this.alertService=o,this.authenticationService=i,this.crossFrameEventService=r,this.BASE_URL="/cmswebservices",this.SYNC_JOB_INFO_BY_TARGET_URI="/cmswebservices/v1/catalogs/:catalog/synchronizations/targetversions/:target",this.SYNC_JOB_INFO_BY_SOURCE_AND_TARGET_URI="/cmswebservices/v1/catalogs/:catalog/versions/:source/synchronizations/versions/:target",this.intervalHandle={},this.syncRequested=[],this.syncJobInfoByTargetRestService=this.restServiceFactory.get(this.SYNC_JOB_INFO_BY_TARGET_URI),this.syncJobInfoBySourceAndTargetRestService=this.restServiceFactory.get(this.SYNC_JOB_INFO_BY_SOURCE_AND_TARGET_URI,"catalog")}var e,t,n,a,c,l;return SynchronizationService.$inject=["restServiceFactory","timerService","translateService","alertService","authenticationService","crossFrameEventService"],SynchronizationService.prototype.updateCatalogSync=function(e){return o.__awaiter(this,void 0,Promise,function(){var t,n,i;return o.__generator(this,function(o){switch(o.label){case 0:t=this._getJobKey(e.catalogId,e.sourceCatalogVersion,e.targetCatalogVersion),this.addCatalogSyncRequest(t),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.syncJobInfoBySourceAndTargetRestService.save({catalog:e.catalogId,source:e.sourceCatalogVersion,target:e.targetCatalogVersion})];case 2:return[2,o.sent()];case 3:return n=o.sent(),i=this.translateService.instant("sync.running.error.msg",{catalogName:e.name}),"Conflict"===n.statusText&&this.alertService.showDanger({message:i}),[2,null];case 4:return[2]}})})},SynchronizationService.prototype.getCatalogSyncStatus=function(e){return e.sourceCatalogVersion?this.getSyncJobInfoBySourceAndTarget(e):this.getLastSyncJobInfoByTarget(e)},SynchronizationService.prototype.getSyncJobInfoBySourceAndTarget=function(e){return this.syncJobInfoBySourceAndTargetRestService.get({catalog:e.catalogId,source:e.sourceCatalogVersion,target:e.targetCatalogVersion})},SynchronizationService.prototype.getLastSyncJobInfoByTarget=function(e){return this.syncJobInfoByTargetRestService.get({catalog:e.catalogId,target:e.targetCatalogVersion})},SynchronizationService.prototype.startAutoGetSyncData=function(e,t){var n=this,o=e.catalogId,i=e.sourceCatalogVersion,r=e.targetCatalogVersion,s=this._getJobKey(o,i,r),a=this.timerService.createTimer(function(){return n._autoSyncCallback(e,t,s)},5e3);a.start(),this.intervalHandle[s]=a},SynchronizationService.prototype.stopAutoGetSyncData=function(e){var t=this._getJobKey(e.catalogId,e.sourceCatalogVersion,e.targetCatalogVersion);this.intervalHandle[t]&&(this.syncRequested.indexOf(t)>-1?this.intervalHandle[t].discardWhenNextSynced=!0:(this.intervalHandle[t].stop(),this.intervalHandle[t]=void 0))},SynchronizationService.prototype._autoSyncCallback=function(e,t,n){return o.__awaiter(this,void 0,Promise,function(){var i,r;return o.__generator(this,function(o){switch(o.label){case 0:return[4,this.authenticationService.isAuthenticated(this.BASE_URL)];case 1:return o.sent()||this.stopAutoGetSyncData(e),[4,this.getCatalogSyncStatus(e)];case 2:return i=o.sent(),r=this.syncRequestedCallback(e)(i),t(r),this.intervalHandle[n]||this.startAutoGetSyncData(e,t),[2]}})})},SynchronizationService.prototype.syncRequestedCallback=function(e){var t=this,n=this._getJobKey(e.catalogId,e.sourceCatalogVersion,e.targetCatalogVersion);return function(o){return t.catalogSyncInProgress(n)&&(t.catalogSyncFinished(o)&&(t.removeCatalogSyncRequest(n),t.crossFrameEventService.publish(s.a.CATALOG_SYNCHRONIZED,e)),(t.intervalHandle[n].discardWhenNextSynced&&t.catalogSyncFinished(o)||t.catalogSyncAborted(o))&&(t.intervalHandle[n].stop(),t.intervalHandle[n]=void 0,t.removeCatalogSyncRequest(n))),o}},SynchronizationService.prototype.catalogSyncInProgress=function(e){return this.syncRequested.indexOf(e)>-1},SynchronizationService.prototype.catalogSyncFinished=function(e){return"FINISHED"===e.syncStatus},SynchronizationService.prototype.catalogSyncAborted=function(e){return"ABORTED"===e.syncStatus},SynchronizationService.prototype.removeCatalogSyncRequest=function(e){var t=this.syncRequested.indexOf(e);t>-1&&this.syncRequested.splice(t,1)},SynchronizationService.prototype.addCatalogSyncRequest=function(e){-1===this.syncRequested.indexOf(e)&&this.syncRequested.push(e)},SynchronizationService.prototype._getJobKey=function(e,t,n){return e+"_"+t+"_"+n},SynchronizationService=o.__decorate([Object(r.SeDowngradeService)(),Object(r.OperationContextRegistered)("/cmswebservices/v1/catalogs/:catalog/synchronizations/targetversions/:target",r.OPERATION_CONTEXT.CMS),Object(r.OperationContextRegistered)("/cmswebservices/v1/catalogs/:catalog/versions/:source/synchronizations/versions/:target",r.OPERATION_CONTEXT.CMS),o.__metadata("design:paramtypes",["function"==typeof(e=void 0!==r.RestServiceFactory&&r.RestServiceFactory)?e:Object,"function"==typeof(t=void 0!==r.TimerService&&r.TimerService)?t:Object,"function"==typeof(n=void 0!==i.TranslateService&&i.TranslateService)?n:Object,"function"==typeof(a=void 0!==r.IAlertService&&r.IAlertService)?a:Object,"function"==typeof(c=void 0!==r.IAuthenticationService&&r.IAuthenticationService)?c:Object,"function"==typeof(l=void 0!==r.CrossFrameEventService&&r.CrossFrameEventService)?l:Object])],SynchronizationService)}()},function(e,t,n){"use strict";n(31),n(17),n(32);var o=n(33);n.o(o,"CmsCommonsModule")&&n.d(t,"CmsCommonsModule",function(){return o.CmsCommonsModule}),n.o(o,"CmsConstantsModule")&&n.d(t,"CmsConstantsModule",function(){return o.CmsConstantsModule}),n.o(o,"CmsResourceLocationsModule")&&n.d(t,"CmsResourceLocationsModule",function(){return o.CmsResourceLocationsModule}),n.o(o,"ComponentService")&&n.d(t,"ComponentService",function(){return o.ComponentService}),n.o(o,"IContextAwareEditableItemService")&&n.d(t,"IContextAwareEditableItemService",function(){return o.IContextAwareEditableItemService}),n.o(o,"IPageService")&&n.d(t,"IPageService",function(){return o.IPageService}),n.o(o,"SlotStatus")&&n.d(t,"SlotStatus",function(){return o.SlotStatus}),n.o(o,"SynchronizationPanelModule")&&n.d(t,"SynchronizationPanelModule",function(){return o.SynchronizationPanelModule}),n.o(o,"SynchronizationService")&&n.d(t,"SynchronizationService",function(){return o.SynchronizationService}),n.o(o,"TYPES_RESOURCE_URI")&&n.d(t,"TYPES_RESOURCE_URI",function(){return o.TYPES_RESOURCE_URI}),n.o(o,"slotEvictionTag")&&n.d(t,"slotEvictionTag",function(){return o.slotEvictionTag});n(34);var i=n(35);n.d(t,"SlotStatus",function(){return i.a});var r=n(36);n.o(r,"CmsCommonsModule")&&n.d(t,"CmsCommonsModule",function(){return r.CmsCommonsModule}),n.o(r,"CmsConstantsModule")&&n.d(t,"CmsConstantsModule",function(){return r.CmsConstantsModule}),n.o(r,"CmsResourceLocationsModule")&&n.d(t,"CmsResourceLocationsModule",function(){return r.CmsResourceLocationsModule}),n.o(r,"ComponentService")&&n.d(t,"ComponentService",function(){return r.ComponentService}),n.o(r,"IContextAwareEditableItemService")&&n.d(t,"IContextAwareEditableItemService",function(){return r.IContextAwareEditableItemService}),n.o(r,"IPageService")&&n.d(t,"IPageService",function(){return r.IPageService}),n.o(r,"SynchronizationPanelModule")&&n.d(t,"SynchronizationPanelModule",function(){return r.SynchronizationPanelModule}),n.o(r,"SynchronizationService")&&n.d(t,"SynchronizationService",function(){return r.SynchronizationService}),n.o(r,"TYPES_RESOURCE_URI")&&n.d(t,"TYPES_RESOURCE_URI",function(){return r.TYPES_RESOURCE_URI}),n.o(r,"slotEvictionTag")&&n.d(t,"slotEvictionTag",function(){return r.slotEvictionTag});n(37);var s=n(38);n.o(s,"CmsCommonsModule")&&n.d(t,"CmsCommonsModule",function(){return s.CmsCommonsModule}),n.o(s,"CmsConstantsModule")&&n.d(t,"CmsConstantsModule",function(){return s.CmsConstantsModule}),n.o(s,"CmsResourceLocationsModule")&&n.d(t,"CmsResourceLocationsModule",function(){return s.CmsResourceLocationsModule}),n.o(s,"ComponentService")&&n.d(t,"ComponentService",function(){return s.ComponentService}),n.o(s,"IContextAwareEditableItemService")&&n.d(t,"IContextAwareEditableItemService",function(){return s.IContextAwareEditableItemService}),n.o(s,"IPageService")&&n.d(t,"IPageService",function(){return s.IPageService}),n.o(s,"SynchronizationPanelModule")&&n.d(t,"SynchronizationPanelModule",function(){return s.SynchronizationPanelModule}),n.o(s,"SynchronizationService")&&n.d(t,"SynchronizationService",function(){return s.SynchronizationService}),n.o(s,"TYPES_RESOURCE_URI")&&n.d(t,"TYPES_RESOURCE_URI",function(){return s.TYPES_RESOURCE_URI}),n.o(s,"slotEvictionTag")&&n.d(t,"slotEvictionTag",function(){return s.slotEvictionTag})},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";var o,i,r;!function(e){e.ContentPage="ContentPage",e.CategoryPage="CategoryPage",e.ProductPage="ProductPage",e.EmailPage="EmailPage"}(o||(o={})),function(e){e.ACTIVE="ACTIVE",e.DELETED="DELETED"}(i||(i={})),function(e){e.APPROVED="APPROVED",e.CHECK="CHECK",e.UNAPPROVED="UNAPPROVED"}(r||(r={}))},function(e,t,n){"use strict";var o;n.d(t,"a",function(){return o}),function(e){e.TEMPLATE="TEMPLATE",e.PAGE="PAGE",e.OVERRIDE="OVERRIDE"}(o||(o={}))},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(1),i=n(0),r=n(3),s=function(){function CmsConstantsModule(){}return CmsConstantsModule=o.__decorate([Object(i.SeModule)({providers:[i.diNameUtils.makeValueProvider({DEFAULT_SYNCHRONIZATION_STATUSES:r.c}),i.diNameUtils.makeValueProvider({DEFAULT_SYNCHRONIZATION_POLLING:r.b}),i.diNameUtils.makeValueProvider({DEFAULT_SYNCHRONIZATION_EVENT:r.a})]})],CmsConstantsModule)}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(1),i=n(5),r=n(6),s=function(){function CmsCommonsModule(){}return CmsCommonsModule=o.__decorate([Object(i.NgModule)({providers:[r.d]})],CmsCommonsModule)}()},function(e,t,n){"use strict";var o=n(42);n.o(o,"ComponentService")&&n.d(t,"ComponentService",function(){return o.ComponentService}),n.o(o,"IContextAwareEditableItemService")&&n.d(t,"IContextAwareEditableItemService",function(){return o.IContextAwareEditableItemService}),n.o(o,"IPageService")&&n.d(t,"IPageService",function(){return o.IPageService}),n.o(o,"SlotStatus")&&n.d(t,"SlotStatus",function(){return o.SlotStatus}),n.o(o,"SynchronizationPanelModule")&&n.d(t,"SynchronizationPanelModule",function(){return o.SynchronizationPanelModule}),n.o(o,"SynchronizationService")&&n.d(t,"SynchronizationService",function(){return o.SynchronizationService}),n.o(o,"slotEvictionTag")&&n.d(t,"slotEvictionTag",function(){return o.slotEvictionTag})},function(e,t,n){"use strict";n(3),n(13);var o=n(43);n.d(t,"SynchronizationPanelModule",function(){return o.a});var i=n(44);n.o(i,"ComponentService")&&n.d(t,"ComponentService",function(){return i.ComponentService}),n.o(i,"IContextAwareEditableItemService")&&n.d(t,"IContextAwareEditableItemService",function(){return i.IContextAwareEditableItemService}),n.o(i,"IPageService")&&n.d(t,"IPageService",function(){return i.IPageService}),n.o(i,"SlotStatus")&&n.d(t,"SlotStatus",function(){return i.SlotStatus}),n.o(i,"SynchronizationService")&&n.d(t,"SynchronizationService",function(){return i.SynchronizationService}),n.o(i,"slotEvictionTag")&&n.d(t,"slotEvictionTag",function(){return i.slotEvictionTag})},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(1),i=n(0),r=n(13),s=function(){function SynchronizationPanelModule(){}return SynchronizationPanelModule=o.__decorate([Object(i.SeModule)({imports:[i.YHelpModule],declarations:[r.a]})],SynchronizationPanelModule)}()},function(e,t){},function(e,t){},function(e,t){e.exports='<div\n    class="sync-indicator-decorator"\n    [ngClass]="syncStatus.status"\n    [attr.sync-status]="syncStatus.status"\n>\n    <ng-content class="se-wrapper-data"></ng-content>\n</div>\n'},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n(0),i=(new o.EvictionTag({event:"WORKFLOW_FINISHED_EVENT"}),new o.EvictionTag({event:"WORKFLOW_TASKS_MENU_OPENED_EVENT"}),new o.EvictionTag({event:"SLOT_UPDATE_EVENT"}))},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){function IPageService(){}return IPageService.prototype.getPageById=function(e){"proxyFunction";return null},IPageService.prototype.getPageByUuid=function(e){"proxyFunction";return null},IPageService.prototype.getCurrentPageInfo=function(){"proxyFunction";return null},IPageService.prototype.getCurrentPageInfoByVersion=function(e){"proxyFunction";return null},IPageService.prototype.isPagePrimary=function(e){"proxyFunction";return null},IPageService.prototype.isPagePrimaryWithContext=function(e,t){"proxyFunction";return null},IPageService.prototype.getPrimaryPage=function(e){"proxyFunction";return null},IPageService.prototype.primaryPageForPageTypeExists=function(e,t){"proxyFunction";return null},IPageService.prototype.getPaginatedPrimaryPagesForPageType=function(e,t,n){"proxyFunction";return null},IPageService.prototype.getVariationPages=function(e){"proxyFunction";return null},IPageService.prototype.updatePageById=function(e,t){"proxyFunction";return null},IPageService.prototype.forcePageApprovalStatus=function(e){"proxyFunction";return null},IPageService.prototype.isPageApproved=function(e){"proxyFunction";return null},IPageService.prototype.buildUriContextForCurrentPage=function(){"proxyFunction";return null},IPageService}()},function(e,t,n){e.exports=n(7)(66)},function(e,t,n){e.exports=n(7)(32)},function(e,t,n){e.exports=n(7)(246)},function(e,t,n){var o={"./components/externalComponent/externalComponentButton.js":53,"./components/externalComponent/externalComponentDecorator.js":54,"./components/slotShared/slotSharedButton.js":55,"./components/slotSharedDisabled/externalSlotDisabledDecorator.js":56,"./components/slotSharedDisabled/sharedSlotDisabledDecorator.js":57,"./components/slotSharedDisabled/slotDisabledComponent.js":58,"./components/slotUnshared/slotUnsharedButton.js":59,"./components/slotVisibility/hiddenComponentMenu/hiddenComponentMenu.js":60,"./components/slotVisibility/slotVisibilityButton.js":61,"./components/slotVisibility/slotVisibilityComponent.js":62,"./components/synchronize/slots/slotSyncButton.js":63,"./services/componentInfoService.js":64,"./services/componentVisibilityAlertService.js":65,"./services/contextualMenuDropdownService.js":66,"./services/dragAndDrop/componentEditingFacadeService.js":67,"./services/dragAndDrop/slotRestrictionsService.js":68,"./services/editorEnablerService.js":69,"./services/pageContentSlotsService.js":70,"./services/removeComponentService.js":71,"./services/slotSharedService.js":72,"./services/slotSynchronizationService.js":73,"./services/slotUnsharedService.js":74,"./services/slotVisibilityService.js":75,"./templates.js":76};function webpackContext(e){var t=webpackContextResolve(e);return n(t)}function webpackContextResolve(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}webpackContext.keys=function webpackContextKeys(){return Object.keys(o)},webpackContext.resolve=webpackContextResolve,e.exports=webpackContext,webpackContext.id=52},function(e,t){angular.module("externalComponentButtonModule",["smarteditServicesModule"]).controller("externalComponentButtonController",["l10nFilter","catalogService",function(e,t){this.$onInit=function(){return this.isReady=!1,t.getCatalogVersionByUuid(this.catalogVersionUuid).then(function(t){this.catalogVersion=e(t.catalogName)+" ("+t.version+")",this.isReady=!0}.bind(this))}}]).component("externalComponentButton",{templateUrl:"externalComponentButtonTemplate.html",controller:"externalComponentButtonController",controllerAs:"ctrl",bindings:{catalogVersionUuid:"<"}})},function(e,t){angular.module("externalComponentDecoratorModule",["functionsModule","cmsSmarteditServicesModule","yPopoverModule"]).controller("externalComponentDecoratorController",["$element","$translate","$log","l10nFilter","CONTENT_SLOT_TYPE","componentHandlerService","catalogService","cMSModesService",function(e,t,n,o,i,r,s,a){this.$onInit=function(){var t=r.getParentSlotForComponent(e);this.isExtenalSlot=r.isExternalComponent(t,i),this.isReady=!1,a.isVersioningPerspectiveActive().then(function(e){this.isVersioningPerspective=e,s.getCatalogVersionByUuid(this.componentAttributes.smarteditCatalogVersionUuid).then(function(e){this.catalogVersionText=o(e.catalogName)+" ("+e.version+")",this.isReady=!0}.bind(this),function(){n.error("externalComponentDecorator - cannot find catalog version for uuid",this.componentAttributes.smarteditCatalogVersionUuid)}.bind(this))}.bind(this))},this.getTooltipTemplate=function(){return"<div class='external-component-decorator__tooltip'>"+t.instant("se.cms.from.external.catalog.version",{catalogVersion:this.catalogVersionText})+"</div>"}}]).directive("externalComponentDecorator",function(){return{templateUrl:"externalComponentDecoratorTemplate.html",restrict:"C",transclude:!0,replace:!1,controller:"externalComponentDecoratorController",controllerAs:"ctrl",scope:{},bindToController:{active:"=",componentAttributes:"<"}}})},function(e,t){angular.module("slotSharedButtonModule",["slotSharedServiceModule","translationServiceModule","smarteditServicesModule","seConstantsModule","hasOperationPermissionModule"]).controller("slotSharedButtonController",["slotSharedService","$window","crossFrameEventService","EVENT_OUTER_FRAME_CLICKED",function(e,t,n,o){this.slotSharedFlag=!1,this.buttonName="slotSharedButton",this.isPopupOpened=!1,this.isPopupOpenedPreviousValue=!1,this.$onInit=function(){this.slotAttributes={smarteditComponentId:this.componentAttributes.smarteditComponentId,contentSlotUuid:this.componentAttributes.smarteditComponentUuid,componentType:this.componentAttributes.smarteditComponentType,catalogVersionUuid:this.componentAttributes.smarteditCatalogVersionUuid},e.isSlotShared(this.slotId).then(function(e){this.slotSharedFlag=e}.bind(this)),this.unregFn=n.subscribe(o,function(){this.isPopupOpened=!1}.bind(this))},this.$doCheck=function(){this.isPopupOpenedPreviousValue!==this.isPopupOpened&&(this.setRemainOpen({button:this.buttonName,remainOpen:this.isPopupOpened}),this.isPopupOpenedPreviousValue=this.isPopupOpened)},this.convertToNonSharedSlotAndCloneComponents=function(){e.convertSharedSlotToNonSharedSlot(this.slotAttributes,!0).then(function(){this.isPopupOpened=!1,t.location.reload()}.bind(this))},this.convertToNonSharedSlotAndRemoveComponents=function(){e.convertSharedSlotToNonSharedSlot(this.slotAttributes,!1).then(function(){this.isPopupOpened=!1,t.location.reload()}.bind(this))},this.$onDestroy=function(){this.unregFn()}}]).component("slotSharedButton",{templateUrl:"slotSharedButtonTemplate.html",controller:"slotSharedButtonController",controllerAs:"ctrl",bindings:{setRemainOpen:"&",slotId:"@",componentAttributes:"<"}})},function(e,t){angular.module("externalSlotDisabledDecoratorModule",["slotDisabledDecoratorModule"]).directive("externalSlotDisabledDecorator",function(){return{templateUrl:"externalSlotDisabledDecoratorTemplate.html",transclude:!0,restrict:"C",controllerAs:"ctrl",controller:function(){},scope:{},bindToController:{active:"=",componentAttributes:"<"}}})},function(e,t){angular.module("sharedSlotDisabledDecoratorModule",["slotDisabledDecoratorModule"]).directive("sharedSlotDisabledDecorator",function(){return{templateUrl:"sharedSlotDisabledDecoratorTemplate.html",transclude:!0,restrict:"C",controllerAs:"ctrl",controller:function(){},scope:{},bindToController:{active:"=",componentAttributes:"<"}}})},function(e,t){angular.module("slotDisabledDecoratorModule",["yPopoverModule","cmsSmarteditServicesModule"]).controller("slotDisabledComponentController",["$translate","pageInfoService","catalogService","l10nFilter","cMSModesService",function(e,t,n,o,i){var r="hyicon-globe",s="hyicon-linked";this.$onInit=function(){this.isReady=!1,this._checkIfSlotIsInherited(),this._getSourceCatalogName(),this._isVersioningPerspectiveActive()},this._checkIfSlotIsInherited=function(){var e=this.componentAttributes.smarteditCatalogVersionUuid;t.getCatalogVersionUUIDFromPage().then(function(t){this.isExternalSlot=e!==t}.bind(this))},this._getSourceCatalogName=function(){var e=this.componentAttributes.smarteditCatalogVersionUuid;n.getCatalogVersionByUuid(e).then(function(e){this.catalogName=e.catalogName}.bind(this))},this._isVersioningPerspectiveActive=function(){i.isVersioningPerspectiveActive().then(function(e){this.isVersioningPerspective=e,this.isReady=!0}.bind(this))},this.getPopoverMessage=function(){var t;t=this.isVersioningPerspective?this.isExternalSlot?"se.cms.versioning.global.shared.slot.from.label":"se.cms.versioning.shared.slot.from.label":this.isExternalSlot?"se.cms.externalsharedslot.decorator.label":"se.cms.sharedslot.decorator.label";var n={catalogName:o(this.catalogName),slotId:this.componentAttributes.smarteditComponentId};return e.instant(t,n)},this.getSlotIconClass=function(){var e="";return this.active?e=this.isExternalSlot?r:s:void 0!==this.isExternalSlot&&(e=this.isExternalSlot?r:s),e},this.getOuterSlotClass=function(){return this.getSlotIconClass()===r?"disabled-shared-slot__icon--outer-globe":""}.bind(this)}]).component("slotDisabledComponent",{templateUrl:"slotDisabledTemplate.html",controller:"slotDisabledComponentController",controllerAs:"ctrl",bindings:{active:"=",componentAttributes:"<"}})},function(e,t){angular.module("slotUnsharedButtonModule",["slotUnsharedServiceModule","translationServiceModule","confirmationModalServiceModule","smarteditServicesModule","seConstantsModule","hasOperationPermissionModule"]).controller("slotUnsharedButtonController",["$scope","$window","EVENT_OUTER_FRAME_CLICKED","slotUnsharedService","confirmationModalService","crossFrameEventService",function(e,t,n,o,i,r){this.revertToSharedSlot=function(){i.confirm({title:"se.cms.slot.unshared.revert.to.shared.title",templateUrl:"revertToSharedSlotConfirmationTemplate.html"}).then(function(){o.revertToSharedSlot(this.slotUuid).then(function(){this.isPopupOpened=!1,t.location.reload()}.bind(this))}.bind(this))},this.$onInit=function(){this.slotUnsharedFlag=!1,this.buttonName="slotUnsharedButton",this.isPopupOpened=!1,this.isPopupOpenedOldValue=this.isPopupOpened,o.isSlotUnshared(this.slotUid).then(function(e){this.slotUnsharedFlag=e}.bind(this)),this.unregFn=r.subscribe(n,function(){this.isPopupOpened=!1}.bind(this))},this.$doCheck=function(){this.isPopupOpenedOldValue!==this.isPopupOpened&&(this.isPopupOpenedOldValue=this.isPopupOpened,this.setRemainOpen({button:this.buttonName,remainOpen:this.isPopupOpened}))},this.$onDestroy=function(){this.unregFn()}}]).component("slotUnsharedButton",{templateUrl:"slotUnsharedButtonTemplate.html",controller:"slotUnsharedButtonController",controllerAs:"ctrl",bindings:{setRemainOpen:"&",slotUuid:"@",slotUid:"@"}})},function(e,t){angular.module("hiddenComponentMenuModule",["yPopupOverlayModule","yLoDashModule"]).constant("HIDDEN_COMPONENT_OPENED_EVENT","HIDDEN_COMPONENT_OPENED_EVENT").controller("hiddenComponentMenuController",["lodash","hiddenComponentMenuService","systemEventService","componentHandlerService","HIDDEN_COMPONENT_OPENED_EVENT","CONTENT_SLOT_TYPE",function(e,t,n,o,i,r){this.$onInit=function(){var s=o.getOriginalComponent(this.slotId,r);this.slotUuid=o.getUuid(s),t.getItemsForHiddenComponent(this.component,this.slotId).then(function(t){this.configuration=e.cloneDeep(t.configuration),this.configuration.slotUuid=this.slotUuid,this.menuItems=e.cloneDeep(t.buttons)}.bind(this)),this.unRegRemoveComponentOpenedEvent=n.subscribe(i,this.onOtherMenuOpening)},this.$onDestroy=function(){this.unRegRemoveComponentOpenedEvent()},this.popupConfig={templateUrl:"hiddenComponentMenuItemsTemplate.html",halign:"left",valign:"bottom",legacyController:{alias:"ctrl",value:function(){return this}.bind(this)}},this.onButtonClick=function(e){e.stopPropagation(),this.isMenuOpen=!this.isMenuOpen,this.isMenuOpen&&n.publishAsync(i,{componentId:this.component.uid,slotId:this.slotId})}.bind(this),this.onMenuHide=function(){this.isMenuOpen=!1}.bind(this),this.onOtherMenuOpening=function(e,t){var n=this.component.uid===t.componentId,o=this.slotId===t.slotId;n&&o||(this.isMenuOpen=!1)}.bind(this),this.executeItemCallback=function(e,t){e.action&&(e.action.callback(this.configuration,t),this.isMenuOpen=!1)}}]).component("hiddenComponentMenu",{templateUrl:"hiddenComponentMenuTemplate.html",transclude:!1,controller:"hiddenComponentMenuController",controllerAs:"ctrl",bindings:{component:"<",slotId:"<"}})},function(e,t){angular.module("slotVisibilityButtonModule",["cmssmarteditTemplates","slotVisibilityServiceModule","slotVisibilityComponentModule","seConstantsModule"]).controller("slotVisibilityButtonController",["slotVisibilityService","$scope","sharedDataService","$translate","crossFrameEventService","EVENT_OUTER_FRAME_CLICKED",function(e,t,n,o,i,r){this.buttonName="slotVisibilityButton",this.eyeOnImageClass="sap-icon--show",this.eyeOffImageClass="sap-icon--hide",this.eyeImageClass=this.eyeOffImageClass,this.buttonVisible=!1,this.hiddenComponents=[],this.isComponentListOpened=!1,t.$watch("ctrl.isComponentListOpened",function(e,t){this.eyeImageClass=e?this.eyeOnImageClass:this.eyeOffImageClass,e!==t&&this.setRemainOpen({button:this.buttonName,remainOpen:this.isComponentListOpened})}.bind(this)),this.markExternalComponents=function(e,t){t.forEach(function(t){t.isExternal=t.catalogVersion!==e.pageContext.catalogVersionUuid})},this.getTemplateInfoForExternalComponent=function(){return"<div>"+o.instant("se.cms.slotvisibility.external.component")+"</div>"},this.onInsideClick=function(e){e.stopPropagation()},this.$onInit=function(){e.getHiddenComponents(this.slotId).then(function(e){n.get("experience").then(function(t){this.hiddenComponents=e,this.markExternalComponents(t,this.hiddenComponents),this.hiddenComponentCount=e.length,this.hiddenComponentCount>0&&(this.buttonVisible=!0)}.bind(this))}.bind(this)),this.unregFn=i.subscribe(r,function(){this.isComponentListOpened=!1}.bind(this))},this.$onDestroy=function(){this.unregFn()}}]).component("slotVisibilityButton",{templateUrl:"slotVisibilityButtonTemplate.html",transclude:!0,controller:"slotVisibilityButtonController",controllerAs:"ctrl",bindings:{setRemainOpen:"&",slotId:"@",initButton:"@"}})},function(e,t){angular.module("slotVisibilityComponentModule",["componentVisibilityAlertServiceModule","cmsSmarteditServicesModule","hiddenComponentMenuModule"]).controller("slotVisibilityComponentController",["$injector","componentVisibilityAlertService","editorModalService","catalogService","catalogVersionPermissionService","componentSharedService","domain",function(e,t,n,o,i,r,s){this.openEditorModal=function(){n.openAndRerenderSlot(this.component.typeCode,this.component.uuid,"visible").then(function(e){t.checkAndAlertOnComponentVisibility({itemId:e.uuid,itemType:e.itemtype,catalogVersion:e.catalogVersion,restricted:e.restricted,slotId:this.slotId,visible:e.visible})}.bind(this))},this.$onInit=function(){this.isReady=!1,this.imageRoot=s+"/cmssmartedit/images",r.isComponentShared(this.component).then(function(e){this.isSharedComponent=e}.bind(this)),o.getCatalogVersionByUuid(this.component.catalogVersion).then(function(e){i.hasWritePermission(e.catalogId,e.version).then(function(e){this.readOnly=!e||this.component.isExternal,this.componentVisibilitySwitch=this.component.visible?"se.cms.component.visibility.status.on":"se.cms.component.visibility.status.off",this.componentRestrictionsCount="("+(this.component.restrictions?this.component.restrictions.length:0)+")",this.isReady=!0}.bind(this))}.bind(this))}}]).component("slotVisibilityComponent",{templateUrl:"slotVisibilityComponentTemplate.html",transclude:!1,controller:"slotVisibilityComponentController",controllerAs:"ctrl",bindings:{component:"=",slotId:"@",componentId:"@"}})},function(e,t){angular.module("slotSyncButtonModule",["slotSynchronizationServiceModule","seConstantsModule","cmsComponentsModule"]).controller("slotSyncButtonController",["$scope","$translate","SYNCHRONIZATION_POLLING","SYNCHRONIZATION_STATUSES","EVENT_OUTER_FRAME_CLICKED","catalogService","slotSynchronizationService","pageInfoService","crossFrameEventService",function(e,t,n,o,i,r,s,a,c){e.$watch("ctrl.isPopupOpened",function(){this.setRemainOpen({button:this.buttonName,remainOpen:this.isPopupOpened})}.bind(this)),this.statusIsInSync=function(e){return e.status&&e.status===o.IN_SYNC},this.getSyncStatus=function(){a.getPageUUID().then(function(e){s.getSyncStatus(e,this.slotId).then(function(e){this.isSlotInSync=this.statusIsInSync(e),this.newPageIsNotSynchronized=!e.lastSyncStatus,this.ready=!0}.bind(this))}.bind(this))}.bind(this),this.updateStatus=function(e,t){var n=(t.selectedDependencies||[]).concat(t.sharedDependencies||[]).find(function(e){return e.itemId===this.slotId}.bind(this))||{};this.isSlotInSync=this.statusIsInSync(n)};var l=this.getSyncStatus;this.$onInit=function(){this.buttonName="slotSyncButton",this.isPopupOpened=!1,this.newPageIsNotSynchronized=!1,this.ready=!1,this.isSlotInSync=!0,this.getSyncStatus(),this.unRegisterSyncPolling=c.subscribe(n.FAST_FETCH,l),this.newPageIsNotSynchronizedTemplate="<div class='se-popover--inner-content'>"+t.instant("se.cms.slot.sync.from.page.level")+"</div>",this.unregFn=c.subscribe(i,function(){this.isPopupOpened=!1}.bind(this))},this.$onDestroy=function(){this.unRegisterSyncPolling(),this.unregFn()}}]).component("slotSyncButton",{templateUrl:"slotSyncButtonTemplate.html",controller:"slotSyncButtonController",controllerAs:"ctrl",bindings:{setRemainOpen:"&",slotId:"@"}})},function(e,t){angular.module("componentInfoServiceModule",["yLoDashModule","cmsSmarteditServicesModule"]).service("componentInfoService",["$log","$q","yjQuery","lodash","crossFrameEventService","cmsitemsRestService","UUID_ATTRIBUTE","EVENTS","OVERLAY_RERENDERED_EVENT","COMPONENT_CREATED_EVENT","COMPONENT_UPDATED_EVENT","COMPONENT_REMOVED_EVENT",function(e,t,n,o,i,r,s,a,c,l,d,u){var p={},m={};this.getById=function(e,n){if(n||p[e]||document.querySelectorAll("["+s+"='"+e+"']").length||(n=!0),p[e])return t.when(p[e]);if(n)return r.getById(e).then(function(t){return this._resolvePromises(t),p[e]}.bind(this),function(t){throw this._rejectPromises([e],t),t}.bind(this));var o=m[e]||t.defer();return m[e]||(m[e]=o),o.promise},this._resolvePromises=function(e){(e.response?e.response:[e]).forEach(function(e){p[e.uuid]=e,m[e.uuid]&&(m[e.uuid].resolve(e),delete m[e.uuid])})},this._rejectPromises=function(t,n){e.error("componentInfoService:: getById error:",n.message),t.forEach(function(e){m[e]&&(m[e].reject(n),delete m[e])})},this._getComponentsDataByUUIDs=function(e){r.getByIds(e).then(this._resolvePromises,function(t){this._rejectPromises(e,t)}.bind(this))},this._onComponentsAddedToOverlay=function(e){var t=o.map(e,function(e){return n(e).attr(s)}).filter(function(e){return!o.includes(Object.keys(p),e)});t.length&&this._getComponentsDataByUUIDs(t)},this._onComponentsRemovedFromOverlay=function(e){e.filter(function(e){return!n.find("["+s+"='"+n(e).attr(s)+"']").length}).filter(function(e){return o.includes(Object.keys(p),n(e).attr(s))}).map(function(e){return n(e).attr(s)}).forEach(function(e){delete p[e]})},this._forceAddComponent=function(e){this._resolvePromises({response:[e]})},this._forceRemoveComponent=function(e){delete p[e.uuid]},this._isComponentCached=function(e){return!!p[e]},this._clearCache=function(){p={},m={}},i.subscribe(c,function(e,t){t&&(t.addedComponents&&t.addedComponents.length&&this._onComponentsAddedToOverlay(t.addedComponents),t.removedComponents&&t.removedComponents.length&&this._onComponentsRemovedFromOverlay(t.removedComponents))}.bind(this)),this._onComponentAdded=function(e,t){this._forceAddComponent(t)},this._onComponentRemoved=function(e,t){this._forceRemoveComponent(t)},i.subscribe(l,this._onComponentAdded.bind(this)),i.subscribe(d,this._onComponentAdded.bind(this)),i.subscribe(u,this._onComponentRemoved.bind(this)),i.subscribe(a.PAGE_CHANGE,this._clearCache.bind(this)),i.subscribe(a.USER_HAS_CHANGED,this._clearCache.bind(this))}])},function(e,t){angular.module("componentVisibilityAlertServiceModule",["componentVisibilityAlertServiceInterfaceModule"]).factory("componentVisibilityAlertService",["ComponentVisibilityAlertServiceInterface","extend","gatewayProxy",function(e,t,n){var o=function(){this.gatewayId="ComponentVisibilityAlertService",n.initForService(this,["checkAndAlertOnComponentVisibility"])};return new(o=t(e,o))}])},function(e,t){angular.module("contextualMenuDropdownServiceModule",["contextualMenuDecoratorModule","smarteditServicesModule"]).run(["contextualMenuDropdownService",function(e){e._registerIsOpenEvent()}]).service("contextualMenuDropdownService",["systemEventService","CTX_MENU_DROPDOWN_IS_OPEN","CLOSE_CTX_MENU","DRAG_AND_DROP_EVENTS",function(e,t,n,o){var i;this._registerIsOpenEvent=function(){e.subscribe(t,function(){this._registerDragStarted()}.bind(this))},this._registerDragStarted=function(){i=e.subscribe(o.DRAG_STARTED,this._triggerCloseOperation)},this._triggerCloseOperation=function(){e.publishAsync(n),i&&i()}.bind(this)}])},function(e,t){angular.module("componentEditingFacadeModule",["alertServiceModule","componentVisibilityAlertServiceModule","cmsSmarteditServicesModule","smarteditServicesModule","slotVisibilityServiceModule","translationServiceModule","functionsModule"]).constant("COMPONENT_CREATED_EVENT","COMPONENT_CREATED_EVENT").constant("COMPONENT_UPDATED_EVENT","COMPONENT_UPDATED_EVENT").service("componentEditingFacade",["$log","$q","$translate","copy","componentService","systemEventService","crossFrameEventService","pageInfoService","restServiceFactory","editorModalService","renderService","alertService","PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI","componentVisibilityAlertService","slotVisibilityService","sharedDataService","COMPONENT_CREATED_EVENT","COMPONENT_UPDATED_EVENT","EVENT_SMARTEDIT_COMPONENT_UPDATED",function(e,t,n,o,i,r,s,a,c,l,d,u,p,m,S,h,v,g,y){var f;function _generateAndAlertErrorMessage(e,t,n,o){n&&n.error&&n.error.errors&&n.error.errors.length>0?u.showDanger({message:"se.cms.draganddrop.error",messagePlaceholders:{sourceComponentId:e,targetSlotId:t,detailedError:n.error.errors[0].message}}):o&&u.showDanger(o)}function _renderSlots(n,o,i,r){return d.renderSlots(n).then(function(){return S.reloadSlotsInfo().then(function(){return r&&function _generateAndAlertSuccessMessage(e,t){u.showSuccess({message:"se.cms.draganddrop.success",messagePlaceholders:{sourceComponentId:e,targetSlotId:t}})}(o,i),t.when()},function(n){return e.error("componentEditingFacadeModule._renderSlots::slotVisibilityService.reloadSlotsInfo"),e.error(n),t.reject(n)})},function(n){return e.error("componentEditingFacadeModule._renderSlots::renderService.renderSlots - targetSlotId:",i),e.error(n),_generateAndAlertErrorMessage(o,i,n),t.reject(n)})}this.addNewComponentToSlot=function(e,t,n,o){var i={smarteditComponentType:n,catalogVersionUuid:t};return l.open(i,e.targetSlotUUId,o).then(function(t){return m.checkAndAlertOnComponentVisibility({itemId:t.uuid,itemType:t.itemtype,catalogVersion:t.catalogVersion,restricted:t.restricted,slotId:e.targetSlotId,visible:t.visible}),s.publish(v,t),_renderSlots([e.targetSlotId],t.uid,e.targetSlotId,!0)})},this.addExistingComponentToSlot=function(e,n,o){return a.getPageUID().then(function(a){return i.addExistingComponent(a,n.componentId,e,o).then(function(){return i.loadComponentItem(n.componentUuid).then(function(t){return m.checkAndAlertOnComponentVisibility({itemId:n.componentUuid,itemType:n.componentType,catalogVersion:t.catalogVersion,restricted:t.restricted,slotId:e,visible:t.visible}),r.publish(g,t),s.publish(y,{componentId:n.componentId,componentType:n.componentType,componentUuid:n.componentUuid,requiresReplayingDecorators:!0}),_renderSlots(e,n.componentId,e,!0)},function(o){return _generateAndAlertErrorMessage(n.componentId,e,o),t.reject()})},function(o){return _generateAndAlertErrorMessage(n.componentId,e,o),t.reject()})})},this.cloneExistingComponentToSlot=function(e){return i.loadComponentItem(e.dragInfo.componentUuid).then(function(t){return h.get("experience").then(function(i){var r=o(t);r.componentUuid=r.uuid,r.cloneComponent=!0,r.catalogVersion=i.pageContext.catalogVersionUuid,r.name=n.instant("se.cms.component.name.clone.of.prefix")+" "+r.name,delete r.uuid,delete r.uid,delete r.slots,delete r.restrictions,delete r.creationtime,delete r.modifiedtime;var a={smarteditComponentType:e.dragInfo.componentType,catalogVersionUuid:i.pageContext.catalogVersionUuid,content:o(r),initialDirty:!0};return l.open(a,e.targetSlotId,e.position).then(function(t){return m.checkAndAlertOnComponentVisibility({itemId:t.uuid,itemType:t.itemtype,catalogVersion:t.catalogVersion,restricted:t.restricted,slotId:e.targetSlotId,visible:t.visible}),s.publish(v,t),_renderSlots(e.targetSlotId,t.uid,e.targetSlotId,!0)})})},function(n){return _generateAndAlertErrorMessage(e.dragInfo.componentId,e.targetSlotId,n),t.reject()})},this.moveComponent=function(e,n,o,i){var r=p+"/pages/:pageId/contentslots/:currentSlotId/components/:componentId";return f=f||c.get(r,"componentId"),a.getPageUID().then(function(r){return f.update({pageId:r,currentSlotId:e,componentId:o,slotId:n,position:i}).then(function(){return _renderSlots([e,n],o,n)},function(e){return _generateAndAlertErrorMessage(o,n,e,{message:"se.cms.draganddrop.move.failed",messagePlaceholders:{slotID:n,componentID:o}}),t.reject()})})}}])},function(e,t){angular.module("slotRestrictionsServiceModule",["yLoDashModule","slotSharedServiceModule","functionsModule","cmsSmarteditServicesModule"]).constant("CONTENT_SLOTS_TYPE_RESTRICTION_FETCH_LIMIT",100).constant("COMPONENT_IN_SLOT_STATUS",{ALLOWED:"allowed",DISALLOWED:"disallowed",MAYBEALLOWED:"mayBeAllowed"}).service("slotRestrictionsService",["$log","lodash","isBlank","yjQuery","gatewayProxy","crossFrameEventService","EVENTS","componentHandlerService","pageInfoService","slotSharedService","restServiceFactory","pageContentSlotsComponentsRestService","typePermissionsRestService","CONTENT_SLOTS_TYPE_RESTRICTION_RESOURCE_URI","CONTENT_SLOTS_TYPE_RESTRICTION_FETCH_LIMIT","COMPONENT_IN_SLOT_STATUS","CONTENT_SLOT_TYPE",function(e,t,n,o,i,r,s,a,c,l,d,u,p,m,S,h,v){var g,y={},f=null;this.getAllComponentTypesSupportedOnPage=function(){var n=o(a.getAllSlotsSelector()),i=Array.prototype.slice.call(n.map(function(){return a.getId(o(this))}));return Promise.all(i.map(function(e){return this.getSlotRestrictions(e)}.bind(this))).then(function(e){return t.flatten(e)},function(t){e.info(t)})},this.getSlotRestrictions=function(e){return this._getPageUID(f).then(function(t){f=t;var n=this._getEntryId(f,e);return y[n]?Promise.resolve(y[n]):this._isExternalSlot(e)?(y[n]=[],Promise.resolve([])):Promise.resolve()}.bind(this))},this._cacheSlotsRestrictions=function(){var e=a.getAllSlotUids()||[];e=e.filter(function(e){return!this._isExternalSlot(e,v)}.bind(this));var n=t.uniq(e),o=t.chunk(n,S);return this._recursiveFetchSlotsRestrictions(o,0)},this._recursiveFetchSlotsRestrictions=function(e,t){return t===e.length?Promise.resolve():this._fetchSlotsRestrictions(e[t]).then(function(){return this._recursiveFetchSlotsRestrictions(e,t+1)}.bind(this))},this._fetchSlotsRestrictions=function(t){return this._getPageUID(f).then(function(n){return f=n,(g=g||d.get(m,f)).save({slotIds:t,pageUid:f}).then(function(e){return(e||[]).forEach(function(e){var t=this._getEntryId(f,e.contentSlotUid);y[t]=e.validComponentTypes}.bind(this)),Promise.resolve()}.bind(this),function(t){return e.info(t),Promise.reject()})}.bind(this))},this.isComponentAllowedInSlot=function(e,n){return this.getSlotRestrictions(e.id).then(function(o){return u.getComponentsForSlot(e.id).then(function(i){return e.id===n.slotId||!i.some(function(e){return e.uid===n.componentId})?o?t.includes(o,n.componentType)?Promise.resolve(h.ALLOWED):Promise.resolve(h.DISALLOWED):Promise.resolve(h.MAYBEALLOWED):Promise.resolve(h.DISALLOWED)})})},this.isSlotEditable=function(e){return p.hasUpdatePermissionForTypes([v]).then(function(t){return l.isSlotShared(e).then(function(n){var o=t[v];if(n){var i=this._isExternalSlot(e);o=o&&!i&&!l.areSharedSlotsDisabled()}return o}.bind(this))}.bind(this))},this._emptyCache=function(){y={},f=null},this._getEntryId=function(e,t){return e+"_"+t},this._isExternalSlot=function(e){return a.isExternalComponent(e,v)},this._getPageUID=function(e){return n(e)?c.getPageUID():Promise.resolve(e)},r.subscribe(s.PAGE_CHANGE,function(){this._emptyCache(),this._cacheSlotsRestrictions()}.bind(this)),i.initForService(this,["getAllComponentTypesSupportedOnPage","getSlotRestrictions"],"SLOT_RESTRICTIONS")}])},function(e,t){angular.module("editorEnablerServiceModule",["componentVisibilityAlertServiceModule","slotRestrictionsServiceModule","cmsSmarteditServicesModule"]).factory("editorEnablerService",["COMPONENT_UPDATED_EVENT","systemEventService","componentVisibilityAlertService","componentHandlerService","editorModalService","featureService","slotRestrictionsService",function(e,t,n,o,i,r,s){function EditorEnablerService(){this._editButtonCallback=this._editButtonCallback.bind(this)}return EditorEnablerService.prototype._key="se.cms.edit",EditorEnablerService.prototype._nameI18nKey="se.cms.contextmenu.nameI18nKey.edit",EditorEnablerService.prototype._i18nKey="se.cms.contextmenu.title.edit",EditorEnablerService.prototype._descriptionI18nKey="se.cms.contextmenu.descriptionI18n.edit",EditorEnablerService.prototype._editDisplayClass="editbutton",EditorEnablerService.prototype._editDisplayIconClass="sap-icon--edit",EditorEnablerService.prototype._editDisplaySmallIconClass="sap-icon--edit",EditorEnablerService.prototype._editButtonCallback=function(o){var r=o.slotUuid;this.inUse||(this.inUse=!0,i.open(o.componentAttributes).then(function(o){return this.inUse=!1,t.publish(e,o),n.checkAndAlertOnComponentVisibility({itemId:o.uuid,itemType:o.itemtype,catalogVersion:o.catalogVersion,restricted:o.restricted,slotId:r,visible:o.visible})}.bind(this),function(){this.inUse=!1}.bind(this)))},EditorEnablerService.prototype._condition=function(e){var t=o.getParentSlotForComponent(e.element);return s.isSlotEditable(t).then(function(t){return t&&!o.isExternalComponent(e.componentId,e.componentType)})},EditorEnablerService.prototype.enableForComponents=function(e){var t={key:this._key,nameI18nKey:this._nameI18nKey,descriptionI18nKey:this._descriptionI18nKey,priority:400,regexpKeys:e,displayClass:this._editDisplayClass,displayIconClass:this._editDisplayIconClass,displaySmallIconClass:this._editDisplaySmallIconClass,i18nKey:this._i18nKey,condition:this._condition,permissions:["se.context.menu.edit.component"],action:{callback:this._editButtonCallback}};r.addContextualMenuButton(t)},new EditorEnablerService}])},function(e,t){angular.module("pageContentSlotsServiceModule",["resourceModule","smarteditServicesModule","cmsResourceLocationsModule","yLoDashModule"]).service("pageContentSlotsService",["$q","lodash","restServiceFactory","crossFrameEventService","EVENTS","pageInfoService","PAGES_CONTENT_SLOT_RESOURCE_URI",function(e,t,n,o,i,r,s){var a,c=n.get(s);this._reloadPageContentSlots=function(){return r.getPageUID().then(function(n){return a=c.get({pageId:n}).then(function(n){return e.when(t.uniq(n.pageContentSlotList||[]))})})},this.getPageContentSlots=function(){return a?e.when(a):this._reloadPageContentSlots()},this.getSlotStatus=function(n){return(a?e.when(a):this._reloadPageContentSlots()).then(function(e){var o=t.first(e.filter(function(e){return e.slotId===n}));return o?o.slotStatus:void 0})},o.subscribe(i.PAGE_CHANGE,function(){this._reloadPageContentSlots()}.bind(this))}])},function(e,t){angular.module("removeComponentServiceModule",["smarteditServicesModule","removeComponentServiceInterfaceModule","functionsModule","resourceLocationsModule"]).constant("COMPONENT_REMOVED_EVENT","componentRemovedEvent").factory("removeComponentService",["crossFrameEventService","restServiceFactory","renderService","extend","gatewayProxy","$q","$log","RemoveComponentServiceInterface","systemEventService","componentInfoService","PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI","COMPONENT_REMOVED_EVENT",function(e,t,n,o,i,r,s,a,c,l,d,u){var p=function(e){this.gatewayId=e,i.initForService(this,["removeComponent"])};p=o(a,p);var m=t.get(d+"/contentslots/:slotId/components/:componentId","componentId");return p.prototype.removeComponent=function(e){return m.remove({slotId:e.slotId,componentId:e.slotOperationRelatedId}).then(function(){return l.getById(e.componentUuid)}).then(function(t){return c.publish(u,t),l.getById(e.componentUuid,!0)}).then(function(t){return n.renderSlots(e.slotId),t})},new p("RemoveComponent")}])},function(e,t){angular.module("slotSharedServiceModule",["pageContentSlotsServiceModule","yLoDashModule","cmsSmarteditServicesModule"]).service("slotSharedService",["pageContentSlotsService","lodash","cmsitemsRestService","pageInfoService","$translate","confirmationModalService",function(e,t,n,o,i,r){this.isSlotShared=function(n){return e.getPageContentSlots().then(function(e){var o=t.first(e.filter(function(e){return e.slotId===n}));return o?o.slotShared:void 0})},this.setSharedSlotEnablementStatus=function(e){this.disableShareSlotStatus=e},this.areSharedSlotsDisabled=function(){return this.disableShareSlotStatus},this.convertSharedSlotToNonSharedSlot=function(e,t){return this._validateComponentAttributes(e),this._constructCmsItemParameter(e,t).then(function(e){var o={title:"se.cms.slot.shared.convert.to.unshared.confirmation.title"};return o.description=t?"se.cms.slot.shared.convert.to.unshared.clone.components.confirmation.message":"se.cms.slot.shared.convert.to.unshared.remove.components.confirmation.message",r.confirm(o).then(function(){return n.create(e)})})},this._constructCmsItemParameter=function(e,t){return i("se.cms.slot.shared.clone").then(function(n){return o.getPageUID().then(function(o){return{name:o+"-"+e.smarteditComponentId+"-"+n,smarteditComponentId:e.smarteditComponentId,contentSlotUuid:e.contentSlotUuid,itemtype:e.componentType,catalogVersion:e.catalogVersionUuid,pageUuid:o,cloneComponents:t}})}.bind(this))},this._validateComponentAttributes=function(e){if(!e)throw new Error("Parameter: componentAttributes needs to be supplied!");for(var t=["smarteditComponentId","contentSlotUuid","componentType","catalogVersionUuid"],n=0;n<t.length;n++){var o=t[n];if(!e[o])throw new Error("Parameter: componentAttributes."+o+" needs to be supplied!")}}}])},function(e,t){angular.module("slotSynchronizationServiceModule",[]).constant("SYNCHRONIZATION_SLOTS_SELECT_ALL_COMPONENTS_LABEL","se.cms.synchronization.slots.select.all.components").service("slotSynchronizationService",["SYNCHRONIZATION_SLOTS_SELECT_ALL_COMPONENTS_LABEL","syncPollingService",function(e,t){this.getSyncStatus=function(n,o){return t.getSyncStatus(n).then(function(t){var n=(t.selectedDependencies||[]).concat(t.sharedDependencies||[]).find(function(e){return e.name===o})||{};return n.selectAll=e,n})},this.performSync=function(e,n){return t.performSync(e,n)}}])},function(e,t){angular.module("slotUnsharedServiceModule",["cmsSmarteditServicesModule","pageContentSlotsServiceModule"]).service("slotUnsharedService",["$q","cmsitemsRestService","pageContentSlotsService",function(e,t,n){this.isSlotUnshared=function(e){return n.getSlotStatus(e).then(function(e){return"OVERRIDE"===e})},this.revertToSharedSlot=function(e){return t.delete(e)}}])},function(e,t){angular.module("slotVisibilityServiceModule",["resourceModule","cmsSmarteditServicesModule"]).service("slotVisibilityService",["COMPONENT_CREATED_EVENT","COMPONENT_UPDATED_EVENT","COMPONENT_REMOVED_EVENT","$log","crossFrameEventService","componentHandlerService","pageInfoService","pageContentSlotsComponentsRestService",function(e,t,n,o,i,r,s,a){var c=function(e){return Object.keys(e).forEach(function(t){var n=[];r.getOriginalComponentsWithinSlot(t).get().forEach(function(e){n.push(r.getId(e))});var o=e[t].filter(function(e){return-1===n.indexOf(e.uid)});e[t]=o}),e};this.reloadSlotsInfo=function(){return s.getPageUID().then(function(e){return a.clearCache(),a.getSlotsToComponentsMapForPageUid(e)}.bind(this),function(e){throw o.error("slotVisibilityService::reloadSlotsInfo - failed call to pageInfoService.getPageUID"),e})};this.getHiddenComponents=function(e){return function(){return s.getPageUID().then(function(e){return a.getSlotsToComponentsMapForPageUid(e)}.bind(this),function(e){throw o.error("slotVisibilityService::_getSlotToComponentsMap - failed call to pageInfoService.getPageUID"),e})}().then(c).then(function(t){return t[e]||[]},function(){return[]})},this._clearComponentsCache=function(){a.clearCache()},i.subscribe(e,this._clearComponentsCache),i.subscribe(t,this._clearComponentsCache),i.subscribe(n,this._clearComponentsCache)}])},function(e,t){angular.module("cmssmarteditTemplates",[]).run(["$templateCache",function(e){"use strict";e.put("web/features/cmssmartedit/components/externalComponent/externalComponentButtonTemplate.html",'<div class="se-ctx-menu-btn__msg" data-ng-if="ctrl.isReady">{{ctrl.catalogVersion}}</div>\n'),e.put("web/features/cmssmartedit/components/externalComponent/externalComponentDecoratorTemplate.html","<div\n    data-ng-class=\"{\n    'cms-external-component-decorator': !ctrl.isExtenalSlot, \n    'disabled-shared-slot-hovered': ctrl.active && !ctrl.isExtenalSlot, \n    'cms-external-component-decorator--versioning': ctrl.isVersioningPerspective}\"\n>\n"+'    <div class="se-ctx-menu__overlay" data-ng-if="!ctrl.isExtenalSlot && ctrl.isReady">\n        <span\n            data-ng-if="!ctrl.active || ctrl.isVersioningPerspective"\n            data-y-popover\n            data-placement="\'bottom\'"\n            data-template="ctrl.getTooltipTemplate()"\n            data-trigger="\'hover\'"\n            class="sap-icon--globe se-ctx-menu-element__btn"\n            data-ng-class="{\'sap-icon--globe--version\': ctrl.isVersioningPerspective}"\n        ></span>\n    </div>\n    <div\n        class="se-wrapper-data"\n        data-ng-class="{\'disabled-shared-slot-versioning-mode\': ctrl.isVersioningPerspective && !ctrl.isExtenalSlot}"\n        data-ng-transclude\n    ></div>\n</div>\n'),e.put("web/features/cmssmartedit/components/sharedComponent/sharedComponentButtonTemplate.html",'<div class="se-ctx-menu-btn__msg">\n    <div\n        class="se-ctx-menu-btn__msg-title"\n        data-translate="se.cms.contextmenu.shared.component.info.title"\n    ></div>\n    <div data-ng-if="$ctrl.isReady" class="se-ctx-menu-btn__msg-description">\n        {{ $ctrl.message | translate }}\n    </div>\n    <div data-ng-if="!$ctrl.isReady"><div class="spinner-sm spinner-light"></div></div>\n</div>\n'),e.put("web/features/cmssmartedit/components/slotShared/slotSharedButtonTemplate.html",'<div class="se-shared-slot-button-template" data-ng-if="ctrl.slotSharedFlag">\n    <div\n        class="se-slot-ctx-menu__dropdown-toggle-wrapper se-slot-ctx-menu__divider"\n        data-uib-dropdown\n        data-dropdown-append-to="\'#smarteditoverlay\'"\n        data-auto-close="outsideClick"\n        data-is-open="ctrl.isPopupOpened"\n    >\n        <button\n            type="button"\n            data-uib-dropdown-toggle\n            class="se-slot-ctx-menu__dropdown-toggle sap-icon--chain-link se-slot-ctx-menu__dropdown-toggle-icon"\n            data-ng-class="{\'se-slot-ctx-menu__dropdown-toggle--open\': ctrl.isPopupOpened}"\n            id="sharedSlotButton-{{::ctrl.slotId}}"\n        ></button>\n        <div\n            class="dropdown-menu dropdown-menu-right se-slot__dropdown-menu"\n            data-uib-dropdown-menu\n        >\n            <div\n                class="se-slot-contextual-menu__header"\n                data-translate="se.sharedslot.decorator.label"\n            ></div>\n\n            <div class="se-shared-slot__body">\n                <div\n                    class="se-shared-slot__description"\n                    data-translate="se.cms.slot.shared.popover.message"\n                ></div>\n\n                <div has-operation-permission="\'se.shared.slot.override.options\'">\n                    <div\n                        class="se-shared-slot__sub-header"\n                        data-translate="se.cms.slot.shared.popover.convertoptions.title"\n                    ></div>\n\n                    <div class="se-shared-slot__option">\n                        <a\n                            class="se-shared-slot__link fd-link"\n                            data-ng-click="ctrl.convertToNonSharedSlotAndCloneComponents()"\n                            data-translate="se.cms.slot.shared.popover.button.clonecomponents"\n                        >\n                        </a>\n                        <div\n                            class="se-shared-slot__link-description"\n                            data-translate="se.cms.slot.shared.popover.text.clonecomponents"\n                        ></div>\n                    </div>\n                    <div class="se-shared-slot__option">\n                        <a\n                            class="se-shared-slot__link fd-link"\n                            data-ng-click="ctrl.convertToNonSharedSlotAndRemoveComponents()"\n                            data-translate="se.cms.slot.shared.popover.button.removecomponents"\n                        >\n                        </a>\n                        <div\n                            class="se-shared-slot__link-description"\n                            data-translate="se.cms.slot.shared.popover.text.removecomponents"\n                        ></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),e.put("web/features/cmssmartedit/components/slotShared/slotSharedTemplate.html",'<slot-shared-button\n    data-slot-id="{{::ctrl.smarteditComponentId}}"\n    data-component-attributes="ctrl.componentAttributes"\n    data-set-remain-open="ctrl.setRemainOpen(button, remainOpen)"\n>\n</slot-shared-button>\n'),e.put("web/features/cmssmartedit/components/slotSharedDisabled/externalSlotDisabledDecoratorTemplate.html",'<div class="se-decorator-wrap">\n    <slot-disabled-component\n        data-active="ctrl.active"\n        data-component-attributes="ctrl.componentAttributes"\n    />\n    <div ng-transclude></div>\n</div>\n'),e.put("web/features/cmssmartedit/components/slotSharedDisabled/sharedSlotDisabledDecoratorTemplate.html",'<div class="se-decorator-wrap">\n    <slot-disabled-component\n        data-active="ctrl.active"\n        data-component-attributes="ctrl.componentAttributes"\n    />\n    <div ng-transclude></div>\n</div>\n'),e.put("web/features/cmssmartedit/components/slotSharedDisabled/slotDisabledTemplate.html",'<div\n    class="disabled-shared-slot se-slot-popover external-shared-slot"\n    data-ng-class="{ \'disabled-shared-slot-hovered\': ctrl.active, \'external-shared-slot\': ctrl.isExternalSlot, \'disabled-shared-slot-versioning-mode\': ctrl.isVersioningPerspective, \'disabled-shared-slot\': !ctrl.isVersioningPerspective}"\n    data-popover-content="{{ctrl.getPopoverMessage()}}"\n>\n    <div class="se-slot-popover__arrow"><div class="se-slot-popover__arrow--fill"></div></div>\n    <div\n        class="disabled-shared-slot__icon--outer disabled-shared-slot__icon--outer-linked"\n        data-ng-class="[ctrl.getOuterSlotClass(), { \'disabled-shared-slot__icon--outer-hovered\': ctrl.active && !ctrl.isVersioningPerspective}]"\n    >\n        <span\n            class="hyicon shared_slot_disabled_icon disabled-shared-slot__icon--inner"\n            data-ng-class="ctrl.getSlotIconClass()"\n        >\n        </span>\n    </div>\n</div>\n'),e.put("web/features/cmssmartedit/components/slotUnshared/slotUnsharedButtonTemplate.html",'<div class="slot-unshared-button-template" data-ng-if="ctrl.slotUnsharedFlag">\n    <div\n        class="se-slot-ctx-menu__dropdown-toggle-wrapper se-slot-ctx-menu__divider"\n        data-uib-dropdown\n        data-dropdown-append-to="\'#smarteditoverlay\'"\n        data-auto-close="outsideClick"\n        data-is-open="ctrl.isPopupOpened"\n    >\n        <button\n            type="button"\n            data-uib-dropdown-toggle\n            class="se-slot-ctx-menu__dropdown-toggle sap-icon--broken-link se-slot-ctx-menu__dropdown-toggle-icon"\n            data-ng-class="{\'se-slot-ctx-menu__dropdown-toggle--open\': ctrl.isPopupOpened}"\n            id="slot-unshared-button-{{::ctrl.slotUid}}"\n        ></button>\n        <div\n            class="dropdown-menu dropdown-menu-right se-toolbar-menu-content se-slot__dropdown-menu"\n            data-uib-dropdown-menu\n        >\n            <div\n                class="se-slot-contextual-menu__header"\n                data-translate="se.cms.unshared.slot.header"\n            ></div>\n            <div class="shared-slot__divider"></div>\n            <div class="se-shared-slot__body">\n                <div\n                    class="se-shared-slot__link-description se-shared-slot__link-description__unshared"\n                    data-translate="se.cms.slot.unshared.popover.message"\n                ></div>\n                <div data-has-operation-permission="\'se.revert.to.shared.slot.link\'">\n                    <a\n                        class="se-shared-slot__link fd-link"\n                        data-ng-click="ctrl.revertToSharedSlot()"\n                        data-translate="se.cms.slot.unshared.revert.to.shared.title"\n                    >\n                    </a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),e.put("web/features/cmssmartedit/components/slotUnshared/slotUnsharedButtonWrapperTemplate.html",'<slot-unshared-button\n    data-slot-uuid="{{::ctrl.componentAttributes.smarteditComponentUuid}}"\n    data-slot-uid="{{::ctrl.smarteditComponentId}}"\n    data-set-remain-open="ctrl.setRemainOpen(button, remainOpen)"\n></slot-unshared-button>\n'),e.put("web/features/cmssmartedit/components/slotVisibility/hiddenComponentMenu/hiddenComponentMenuItemsTemplate.html",'<div class="se-hidden-component-menu fd-menu__list">\n    <div\n        class="se-hidden-component-menu__item fd-menu__item"\n        data-ng-repeat="dropdownItem in ctrl.menuItems"\n        data-ng-click="ctrl.executeItemCallback(dropdownItem, $event)"\n    >\n        <span\n            class="se-hidden-component-menu__item-icon"\n            data-ng-class="[dropdownItem.displayIconClass]"\n        ></span>\n        <span class="se-hidden-component-menu__item-link">\n            {{ dropdownItem.i18nKey | translate }}\n        </span>\n    </div>\n</div>\n'),e.put("web/features/cmssmartedit/components/slotVisibility/hiddenComponentMenu/hiddenComponentMenuTemplate.html",'<se-popup-overlay\n    class="se-hidden-component-menu__popup-anchor"\n    [popup-overlay]="ctrl.popupConfig"\n    [popup-overlay-trigger]="ctrl.isMenuOpen"\n    (popup-overlay-on-hide)="ctrl.onMenuHide()"\n>\n    <span\n        data-ng-if="ctrl.menuItems.length > 0"\n        data-ng-click="ctrl.onButtonClick($event)"\n        class="sap-icon--overflow se-hidden-component-menu__toggle"\n    ></span>\n</se-popup-overlay>\n'),e.put("web/features/cmssmartedit/components/slotVisibility/slotVisibilityButtonTemplate.html",'<div\n    class="se-slot-ctx-menu__dropdown-toggle-wrapper \n        se-slot-ctx-menu__dropdown-toggle-wrapper--slot-visibility \n        se-slot-ctx-menu__divider"\n    data-uib-dropdown\n    data-dropdown-append-to="\'#smarteditoverlay\'"\n    data-ng-if="ctrl.buttonVisible"\n    data-is-open="ctrl.isComponentListOpened"\n>\n    <button\n        type="button"\n        data-uib-dropdown-toggle\n        class="se-slot-ctx-menu__dropdown-toggle--slot-visibility se-slot-ctx-menu__dropdown-toggle"\n        data-ng-class="{\'se-slot-ctx-menu__dropdown-toggle--open\': ctrl.isComponentListOpened}"\n        id="slot-visibility-button-{{::ctrl.slotId}}"\n    >\n        <span class="se-slot-ctx-menu__dropdown-toggle-icon sap-icon--hide"></span>\n        <span class="se-slot-ctx-menu__dropdown-toggle-add-on"\n            >{{ ::ctrl.hiddenComponentCount }}</span\n        >\n    </button>\n\n    <div\n        class="dropdown-menu dropdown-menu-right se-slot__dropdown-menu"\n        data-uib-dropdown-menu\n        data-ng-click="ctrl.onInsideClick($event)"\n        role="menu"\n        id="slot-visibility-list-{{::ctrl.slotId}}"\n    >\n        <div\n            class="se-slot-contextual-menu__header"\n            data-translate="se.cms.slotvisibility.list.title"\n        ></div>\n\n        <ul class="se-slot-visility__component-list">\n            <li\n                data-ng-repeat="component in ctrl.hiddenComponents track by $index"\n                class="se-slot-visility__component-list-item"\n            >\n                <span\n                    data-y-popover\n                    data-ng-if="component.isExternal"\n                    data-trigger="\'hover\'"\n                    data-template="ctrl.getTemplateInfoForExternalComponent()"\n                >\n                    <slot-visibility-component\n                        data-component="component"\n                        data-component-id="{{::component.uid}}"\n                        data-slot-id="{{::ctrl.slotId}}"\n                    ></slot-visibility-component>\n                </span>\n                <slot-visibility-component\n                    data-component="component"\n                    data-ng-if="!component.isExternal"\n                    data-component-id="{{::component.uid}}"\n                    data-slot-id="{{::ctrl.slotId}}"\n                ></slot-visibility-component>\n            </li>\n        </ul>\n    </div>\n</div>\n'),e.put("web/features/cmssmartedit/components/slotVisibility/slotVisibilityComponentTemplate.html",'<div\n    class="se-slot-visibility-wrapper"\n    data-ng-class="{\'se-slot-visibility-wrapper__external\': ctrl.readOnly}"\n>\n    <div class="se-slot-visiblity-component__content" data-ng-if="ctrl.isReady">\n        <div class="se-slot-visibility__icon-wrapper">\n            <div class="se-slot-visibility__icon sap-icon--home-share"></div>\n            <div\n                data-ng-if="ctrl.isSharedComponent"\n                class="se-slot-visibility__icon--shared sap-icon--chain-link"\n            ></div>\n        </div>\n\n        <div class="se-slot-visiblity-component__description">\n            <div data-ng-if="ctrl.readOnly" class="se-slot-visiblity-component__name">\n                {{ ::ctrl.component.name }}\n            </div>\n            <div\n                data-ng-if="!ctrl.readOnly"\n                class="se-slot-visiblity-component__name--link"\n                data-ng-click="ctrl.openEditorModal()"\n            >\n                {{ ::ctrl.component.name }}\n            </div>\n            <div class="se-slot-visiblity-component__type">{{ ::ctrl.component.typeCode }}</div>\n            <div class="se-slot-visiblity-component__visibility">\n                {{\'se.genericeditor.tab.visibility.title\' | translate}}\n                {{ctrl.componentVisibilitySwitch | translate}} / {{ctrl.componentRestrictionsCount}}\n                {{\'se.cms.restrictions.editor.tab\' | translate}}\n            </div>\n            <div\n                data-ng-if="ctrl.component.isExternal === true"\n                class="sap-icon--globe slot-visiblity-component--globe-icon"\n            ></div>\n        </div>\n    </div>\n    <hidden-component-menu\n        class="slot-visiblity-component--hidden-menu"\n        data-slot-id="ctrl.slotId"\n        data-component="ctrl.component"\n    ></hidden-component-menu>\n</div>\n'),e.put("web/features/cmssmartedit/components/slotVisibility/slotVisibilityWidgetTemplate.html",'<slot-visibility-button\n    data-slot-id="{{::ctrl.smarteditComponentId}}"\n    data-set-remain-open="ctrl.setRemainOpen(button, remainOpen)"\n/>\n'),e.put("web/features/cmssmartedit/components/synchronize/slots/slotSyncButtonTemplate.html",'<div class="se-slot-sync-button-template" data-ng-if="ctrl.ready">\n    <div\n        class="se-slot-ctx-menu__dropdown-toggle-wrapper se-slot-ctx-menu__divider"\n        data-uib-dropdown\n        data-dropdown-append-to="\'#smarteditoverlay\'"\n        data-auto-close="outsideClick"\n        data-is-open="ctrl.isPopupOpened"\n    >\n        <span\n            data-y-popover\n            class="se-slot-ctx-menu__popover-ancor"\n            data-trigger="\'hover\'"\n            data-template="ctrl.newPageIsNotSynchronizedTemplate"\n            data-ng-if="ctrl.newPageIsNotSynchronized"\n            data-placement="\'bottom\'"\n        >\n        </span>\n\n        <button\n            type="button"\n            data-uib-dropdown-toggle\n            class="se-slot-ctx-menu__dropdown-toggle"\n            data-ng-class="{\'se-slot-ctx-menu__dropdown-toggle--open\': ctrl.isPopupOpened, \n                \'se-slot-ctx-menu__dropdown-toggle--disabled\': ctrl.newPageIsNotSynchronized }"\n            id="slot-sync-button-{{::ctrl.slotId}}"\n        >\n            <span class="sap-icon--synchronize se-slot-ctx-menu__dropdown-toggle-icon"></span>\n            <span\n                data-ng-if="!ctrl.isSlotInSync"\n                class="sap-icon--alert se-slot-sync__btn-status se-slot-ctx-menu__dropdown-toggle-add-on"\n            ></span>\n        </button>\n        <div class="se-slot__dropdown-menu dropdown-menu-right" data-uib-dropdown-menu role="menu">\n            <div class="se-toolbar-menu-content--wrapper">\n                <div\n                    class="se-slot-contextual-menu__header"\n                    data-translate="se.cms.synchronization.slot.header"\n                ></div>\n                <div class="se-slot-sync__body">\n                    <slot-synchronization-panel\n                        data-ng-if="ctrl.isPopupOpened"\n                        data-slot-id="ctrl.slotId"\n                    ></slot-synchronization-panel>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),e.put("web/features/cmssmartedit/components/synchronize/slots/slotSynchronizationPanelTemplate.html",'<div data-page-sensitive>\n    <synchronization-panel\n        data-item-id="$ctrl.slotId"\n        data-get-sync-status="$ctrl.getSyncStatus"\n        data-perform-sync="$ctrl.performSync"\n        data-get-api="$ctrl.getApi($api)"\n    >\n    </synchronization-panel>\n</div>\n'),e.put("web/features/cmssmartedit/components/synchronize/slots/slotSyncTemplate.html",'<slot-sync-button\n    data-slot-id="{{::ctrl.smarteditComponentId}}"\n    data-set-remain-open="ctrl.setRemainOpen(button, remainOpen)"\n></slot-sync-button>\n'),e.put("web/features/cmssmartedit/components/synchronize/slots/SyncIndicatorDecoratorTemplate.html",'<div\n    class="sync-indicator-decorator"\n    [ngClass]="syncStatus.status"\n    [attr.sync-status]="syncStatus.status"\n>\n    <ng-content class="se-wrapper-data"></ng-content>\n</div>\n')}])},function(e,t,n){var o={"./dao/resource.js":78,"./services/componentVisibilityAlertServiceInterface.js":79,"./services/removeComponentServiceInterface.js":80,"./templates.js":81};function webpackContext(e){var t=webpackContextResolve(e);return n(t)}function webpackContextResolve(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}webpackContext.keys=function webpackContextKeys(){return Object.keys(o)},webpackContext.resolve=webpackContextResolve,e.exports=webpackContext,webpackContext.id=77},function(e,t){angular.module("resourceModule",["smarteditServicesModule","resourceLocationsModule","cmsResourceLocationsModule","functionsModule"]).factory("itemsResource",["restServiceFactory","ITEMS_RESOURCE_URI","URIBuilder",function(e,t,n){return{getItemResource:function(){return e.get(t)},getItemResourceByContext:function(o){return e.get(new n(t).replaceParams(o).build())}}}]).factory("pagesContentSlotsComponentsResource",["restServiceFactory","PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI",function(e,t){return e.get(t)}]).factory("navigationNodeRestService",["restServiceFactory","NAVIGATION_MANAGEMENT_RESOURCE_URI",function(e,t){return e.get(t)}]).factory("synchronizationResource",["restServiceFactory","URIBuilder","GET_PAGE_SYNCHRONIZATION_RESOURCE_URI","POST_PAGE_SYNCHRONIZATION_RESOURCE_URI",function(e,t,n,o){return{getPageSynchronizationGetRestService:function(o){var i=new t(n).replaceParams(o).build();return e.get(i)},getPageSynchronizationPostRestService:function(n){var i=new t(o).replaceParams(n).build();return e.get(i)}}}])},function(e,t){angular.module("componentVisibilityAlertServiceInterfaceModule",[]).factory("ComponentVisibilityAlertServiceInterface",function(){var e=function(){};return e.prototype.checkAndAlertOnComponentVisibility=function(){},e})},function(e,t){angular.module("removeComponentServiceInterfaceModule",[]).factory("RemoveComponentServiceInterface",function(){function RemoveComponentServiceInterface(){}return RemoveComponentServiceInterface.prototype.removeComponent=function(){},RemoveComponentServiceInterface})},function(e,t){angular.module("cmscommonsTemplates",[]).run(["$templateCache",function(e){"use strict";e.put("web/features/cmscommons/components/synchronize/synchronizationPanelTemplate.html",'<div class="se-sync-panel">\n    <div\n        class="se-sync-panel__sync-status"\n        data-ng-if="$ctrl.headerTemplateUrl"\n        data-ng-include="$ctrl.headerTemplateUrl"\n    ></div>\n\n    <se-message\n        data-ng-if="$ctrl.message"\n        [type]="$ctrl.message.type"\n        [message-id]="\'sync-panel-message-{{$index}}\'"\n    >\n        <ng-container se-message-description> {{$ctrl.message.description}} </ng-container>\n    </se-message>\n\n    <div class="se-sync-panel__sync-info" data-ng-show="$ctrl.showItemList">\n        <div data-ng-if="$ctrl.isLoading">\n            <div class="spinner-sm spinner-light">Loading...</div>\n        </div>\n        <div\n            data-ng-if="!$ctrl.isLoading"\n            data-ng-repeat="dependency in $ctrl.getRows()"\n            data-ng-class="{active: $index==0, \'se-sync-panel--item__external\': dependency.isExternal}"\n            class="se-sync-panel__sync-info__row"\n        >\n            <div class="se-sync-panel__info-checkbox fd-form__item">\n                <input\n                    type="checkbox"\n                    class="fd-form__control"\n                    data-ng-if="!dependency.isExternal"\n                    data-ng-model="dependency.selected"\n                    data-ng-disabled="$ctrl.isDisabled(dependency)"\n                    data-ng-change="$ctrl.selectionChange($index)"\n                    id="sync-info__checkbox_{{$index}}"\n                />\n                <label\n                    data-ng-if="$index===0"\n                    for="sync-info__checkbox_{{$index}}"\n                    class="se-sync-panel__info-checkbox-label se-sync-panel__info-checkbox-label--select-all fd-form__label"\n                    title="{{::dependency.selectAll | translate}}"\n                >\n                    {{::dependency.selectAll | translate}}</label\n                >\n\n                <label\n                    data-ng-if="$index!==0 && !dependency.isExternal"\n                    for="sync-info__checkbox_{{$index}}"\n                    class="se-sync-panel__info-checkbox-label fd-form__label"\n                    title="{{::dependency.name | translate}}"\n                >\n                    {{::dependency.name | translate}}</label\n                >\n\n                <label\n                    data-ng-if="$index!==0 && dependency.isExternal"\n                    data-y-popover\n                    data-trigger="\'hover\'"\n                    data-template="$ctrl.getTemplateInfoForExternalComponent()"\n                    for="sync-info__checkbox_{{$index}}"\n                    class="se-sync-panel__info-checkbox-label fd-form__label"\n                >\n                    {{::dependency.name | translate}}\n                </label>\n            </div>\n\n            <span\n                data-ng-if="$ctrl.buildInfoTemplate(dependency)"\n                data-y-popover\n                data-trigger="\'hover\'"\n                data-title="$ctrl.getInfoTitle(dependency)"\n                data-template="$ctrl.buildInfoTemplate(dependency)"\n                class="pull-right se-sync-panel__sync-info__right-icon"\n                data-ng-class="{\'se-sync-panel--icon-globe\': dependency.isExternal} "\n            >\n                <span\n                    data-status="{{dependency.status}}"\n                    data-ng-if="!dependency.isExternal"\n                    class="se-sync-panel__sync-info-icon"\n                    data-ng-class="{\n                        \'sap-icon--accept\':$ctrl.isInSync(dependency), \n                        \'sap-icon--message-warning\':!$ctrl.isInSync(dependency)}"\n                ></span>\n                <span data-ng-if="dependency.isExternal" class="sap-icon--globe"></span>\n            </span>\n\n            <span\n                data-ng-if="!$ctrl.buildInfoTemplate(dependency)"\n                class="pull-right se-sync-panel__sync-info__right-icon"\n            >\n                <span\n                    data-status="{{dependency.status}}"\n                    class="se-sync-panel__sync-info-icon"\n                    data-ng-class="{\n                        \'sap-icon--accept\':$ctrl.isInSync(dependency), \n                        \'sap-icon--message-warning\':!$ctrl.isInSync(dependency)}"\n                ></span>\n            </span>\n        </div>\n    </div>\n\n    <div class="se-sync-panel__footer" data-ng-if="$ctrl.showSyncButton">\n        <button\n            class="fd-button--emphasized se-sync-panel__footer__btn se-sync-panel__sync-btn"\n            data-ng-disabled="$ctrl.isSyncButtonDisabled()"\n            data-ng-click="$ctrl.syncItems()"\n            data-translate="se.cms.actionitem.page.sync"\n        ></button>\n    </div>\n</div>\n')}])},function(e,t){e.exports=smarteditcommons},function(e,t,n){var o=n(15),i=n(84);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1},s=(o(i,r),i.locals?i.locals:{});e.exports=s},function(e,t,n){(t=n(16)(!1)).push([e.i,".se-sync-panel-header {\n  padding: 0 20px 20px;\n  border-bottom: 1px solid #d9d9d9;\n  min-width: 400px; }\n\n.se-sync-panel__sub-header {\n  padding-top: 4px;\n  color: #51555a; }\n\n.se-sync-panel-header__new-page-message {\n  padding: 20px; }\n\n.se-sync-panel__message--new-page {\n  font-weight: 700;\n  padding-bottom: 4px; }\n\n.se-sync-panel-header__timestamp {\n  font-size: 0.85714rem;\n  line-height: 1.33333;\n  font-weight: 400;\n  color: #51555a;\n  position: absolute;\n  left: 20px;\n  bottom: 23px;\n  width: 150px; }\n\n.se-sync-panel__sync-info {\n  max-height: 300px;\n  overflow-y: scroll; }\n\n.se-sync-panel__sync-info__row {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 20px;\n  height: 40px;\n  border-bottom: 1px solid #d9d9d9; }\n  .se-sync-panel__sync-info__row:first-child {\n    height: 50px; }\n  .se-sync-panel__sync-info__row:last-child {\n    border-bottom: none; }\n\n.se-sync-panel__info-checkbox {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin: 0 !important; }\n  .se-sync-panel__info-checkbox input {\n    margin: 0; }\n\n.fd-form__label.se-sync-panel__info-checkbox-label {\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n  word-break: break-all;\n  max-width: 190px !important;\n  margin: 0 !important;\n  padding-left: 8px;\n  color: #32363a;\n  text-transform: capitalize; }\n  .fd-form__label.se-sync-panel__info-checkbox-label--select-all {\n    font-weight: bold !important; }\n\n.se-sync-panel__sync-info__right-icon {\n  font-size: 1.14286rem;\n  line-height: 1.25;\n  font-weight: 400; }\n\n.se-sync-panel__sync-info-icon.sap-icon--accept {\n  font-size: 1.14286rem;\n  line-height: 1.25;\n  font-weight: 400;\n  color: #0a7e3e; }\n\n.se-sync-panel__sync-info-icon.sap-icon--message-warning {\n  font-size: 1.14286rem;\n  line-height: 1.25;\n  font-weight: 400;\n  color: #e9730c; }\n\n.se-sync-panel__footer {\n  padding: 20px;\n  border-top: 1px solid #d9d9d9;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: flex-end; }\n\nbutton.se-sync-panel__footer__btn {\n  text-transform: capitalize;\n  padding: 0 20px;\n  margin-left: 8px; }\n\n.se-modal__body .se-sync-panel-header,\n.se-modal__body .se-sync-panel__sync-info {\n  padding: 0;\n  border-bottom: none; }\n\n.se-synchronize-catalog {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: flex-end; }\n\n.se-synchronize-catalog__sync-info {\n  display: flex;\n  flex-direction: row;\n  align-items: center; }\n\n.se-synchronize-catalog__sync-btn button {\n  margin-left: 20px; }\n\n.se-synchronize-catalog__sync-info__sync-label,\n.catalog-last-synced {\n  color: #6a6d70;\n  display: block;\n  text-align: right;\n  margin: 0; }\n\n.se-synchronize-catalog__sync-info__sync-cata-name {\n  font-weight: 700;\n  color: #51555a; }\n\n.se-synchronize-catalog__in-progress {\n  color: #0a7e3e; }\n\n.se-synchronize-catalog__sync-failed {\n  color: #bb0000; }\n",""]),e.exports=t},function(e,t,n){var o=n(15),i=n(86);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1},s=(o(i,r),i.locals?i.locals:{});e.exports=s},function(e,t,n){(t=n(16)(!1)).push([e.i,".se-slot-popover {\n  align-items: center;\n  display: flex;\n  flex-direction: column-reverse;\n  justify-content: center; }\n  .se-slot-popover__arrow {\n    opacity: 0;\n    margin-top: 15px;\n    position: relative;\n    width: 0;\n    border-bottom: 12px solid #d9d9d9;\n    border-right: 12px solid transparent;\n    border-left: 12px solid transparent;\n    z-index: 9999; }\n    .se-slot-popover__arrow--fill {\n      position: absolute;\n      top: 1px;\n      left: -11px;\n      width: 0;\n      border-bottom: 11px solid white;\n      border-right: 11px solid transparent;\n      border-left: 11px solid transparent; }\n  .se-slot-popover:before {\n    opacity: 0;\n    box-shadow: 0 0 4px 0 #d9d9d9;\n    z-index: 3125;\n    background-color: white;\n    color: #32363a;\n    border: 1px solid #d9d9d9;\n    border-radius: 4px;\n    content: attr(data-popover-content);\n    margin-bottom: calc(-5.2 * 15px);\n    padding: 10px;\n    white-space: nowrap; }\n\n[data-smartedit-component-type='ContentSlot']:hover .se-slot-popover:before {\n  opacity: 1;\n  margin-top: -1px; }\n\n[data-smartedit-component-type='ContentSlot']:hover .se-slot-popover__arrow {\n  opacity: 1; }\n",""]),e.exports=t},function(e,t,n){var o=n(15),i=n(88);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1},s=(o(i,r),i.locals?i.locals:{});e.exports=s},function(e,t,n){(t=n(16)(!1)).push([e.i,"#smarteditoverlay .se-slot-ctx-menu__divider::after {\n  content: '';\n  background-color: white;\n  display: block;\n  position: absolute;\n  width: 1px;\n  height: 16px;\n  top: 8px;\n  left: -2px;\n  opacity: 0.6; }\n\n#smarteditoverlay .se-slot-ctx-menu__dropdown-toggle-wrapper {\n  margin-right: 3px;\n  position: relative; }\n\n#smarteditoverlay .se-slot-ctx-menu__dropdown-toggle {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.28571rem;\n  line-height: 1.33333;\n  font-weight: 400;\n  background-color: transparent;\n  color: white;\n  width: 55px;\n  height: 32px;\n  border: none; }\n  #smarteditoverlay .se-slot-ctx-menu__dropdown-toggle:hover:not(.se-slot-ctx-menu__dropdown-toggle--open) {\n    opacity: 0.6; }\n  #smarteditoverlay .se-slot-ctx-menu__dropdown-toggle--open {\n    background-color: white;\n    color: #0a6ed1 !important; }\n    #smarteditoverlay .se-slot-ctx-menu__dropdown-toggle--open .se-slot-ctx-menu__dropdown-toggle-add-on {\n      color: #0a6ed1; }\n  #smarteditoverlay .se-slot-ctx-menu__dropdown-toggle-icon {\n    font-size: 1.28571rem;\n    line-height: 1.33333;\n    font-weight: 400; }\n  #smarteditoverlay .se-slot-ctx-menu__dropdown-toggle-icon--disabled {\n    cursor: not-allowed; }\n  #smarteditoverlay .se-slot-ctx-menu__dropdown-toggle-add-on {\n    margin-left: 4px;\n    font-size: 1rem;\n    line-height: 1.42857;\n    font-weight: 400;\n    color: white; }\n\n#smarteditoverlay .se-slot-ctx-menu__popover-ancor {\n  position: absolute;\n  display: block;\n  cursor: not-allowed;\n  height: 100%;\n  width: 100%;\n  top: 0;\n  left: 0; }\n\n#smarteditoverlay .se-slot-contextual-menu__header {\n  padding: 20px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: 1px solid #d9d9d9;\n  height: 53px; }\n  #smarteditoverlay .se-slot-contextual-menu__header:first-child {\n    font-size: 1.14286rem;\n    line-height: 1.25;\n    font-weight: 400;\n    color: #32363a; }\n\n#smarteditoverlay .se-slot__dropdown-menu.dropdown-menu {\n  border: none;\n  border-radius: 0;\n  transform: translateY(-2px);\n  min-width: 265px;\n  max-height: 300px;\n  overflow-y: auto; }\n\n#smarteditoverlay .se-sync-panel__info-checkbox input {\n  margin: 0; }\n\n#smarteditoverlay::before {\n  margin-right: 0 !important;\n  font-size: 1.71429rem;\n  line-height: 1.33333;\n  font-weight: 400; }\n\n#smarteditoverlay .se-sync-panel__sync-btn {\n  color: white; }\n\n#smarteditoverlay .se-slot-visility__component-list {\n  padding: 16px 20px;\n  list-style: none; }\n\n#smarteditoverlay .se-slot-visility__component-list-item {\n  margin-bottom: 16px; }\n  #smarteditoverlay .se-slot-visility__component-list-item:last-child {\n    margin-bottom: 0; }\n\n#smarteditoverlay .se-slot-visibility-wrapper {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  align-items: flex-start; }\n\n#smarteditoverlay .se-slot-visiblity-component__content {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  flex-grow: 1; }\n\n#smarteditoverlay .se-slot-visiblity-component__description {\n  margin-right: 16px; }\n\n#smarteditoverlay .se-slot-visibility__icon-wrapper {\n  position: relative; }\n\n#smarteditoverlay .se-slot-visibility__icon {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.71429rem;\n  line-height: 1.33333;\n  font-weight: 400;\n  height: 48px;\n  width: 48px;\n  border-radius: 4px;\n  background-color: #2b78c5;\n  color: white;\n  margin-right: 16px; }\n  #smarteditoverlay .se-slot-visibility__icon--shared {\n    color: fd-type(\"text\", 5);\n    position: absolute;\n    top: 0;\n    left: 0; }\n\n#smarteditoverlay .se-slot-visibility__icon--shared {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 0;\n  height: 0;\n  border-style: solid;\n  border-width: 14px;\n  border-color: #354a5f transparent transparent #354a5f;\n  border-radius: 4px 0px 0px 0px; }\n  #smarteditoverlay .se-slot-visibility__icon--shared::before {\n    font-size: 1.14286rem;\n    line-height: 1.25;\n    font-weight: 400;\n    position: absolute;\n    left: -12px;\n    top: -15px;\n    color: white; }\n\n#smarteditoverlay .se-slot-visiblity-component__name, #smarteditoverlay .se-slot-visiblity-component__visibility {\n  color: #32363a; }\n\n#smarteditoverlay .se-slot-visiblity-component__name--link {\n  cursor: pointer;\n  color: #0a6ed1; }\n\n#smarteditoverlay .se-slot-visiblity-component__type {\n  color: #6a6d70; }\n\n#smarteditoverlay .slot-visiblity-component--globe-icon {\n  margin-left: 4px; }\n\n#smarteditoverlay .se-hidden-component-menu__toggle {\n  cursor: pointer;\n  color: #0a6ed1; }\n\n#smarteditoverlay .se-hidden-component-menu {\n  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175);\n  background-color: white;\n  border-radius: 4px !important;\n  min-width: 100px;\n  width: -webkit-fit-content;\n  width: -moz-fit-content;\n  width: fit-content;\n  position: absolute;\n  border: 1px solid #d9d9d9;\n  z-index: 2000;\n  top: 96%;\n  left: initial !important;\n  right: 0; }\n  #smarteditoverlay .se-hidden-component-menu::before {\n    height: 0;\n    width: 0;\n    border-style: solid;\n    border-width: 0 8px 8px 8px;\n    border-bottom-color: #d9d9d9;\n    border-bottom-color: var(var(--fd-color-neutral-4));\n    border-left-color: transparent;\n    border-right-color: transparent;\n    content: '';\n    position: absolute;\n    top: -8px; }\n  #smarteditoverlay .se-hidden-component-menu::after {\n    height: 0;\n    width: 0;\n    border-style: solid;\n    border-width: 0 8px 8px 8px;\n    border-bottom-color: white;\n    border-bottom-color: var(var(--fd-color-background-4));\n    border-left-color: transparent;\n    border-right-color: transparent;\n    content: '';\n    position: absolute;\n    top: -7px; }\n  #smarteditoverlay .se-hidden-component-menu::before, #smarteditoverlay .se-hidden-component-menu::after {\n    right: 10px; }\n  #smarteditoverlay .se-hidden-component-menu::before, #smarteditoverlay .se-hidden-component-menu::after {\n    display: none; }\n\n#smarteditoverlay .se-hidden-component-menu__item {\n  display: flex;\n  flex-direction: row;\n  align-items: center; }\n\n#smarteditoverlay .se-hidden-component-menu__item-icon {\n  font-size: 0.85714rem;\n  line-height: 1.33333;\n  font-weight: 400;\n  margin-right: 8px; }\n\n#smarteditoverlay .se-shared-slot__body {\n  padding: 16px 20px;\n  width: 350px; }\n\n#smarteditoverlay .se-shared-slot__sub-header {\n  margin-bottom: 12px; }\n\n#smarteditoverlay .se-shared-slot__option {\n  margin-bottom: 8px; }\n  #smarteditoverlay .se-shared-slot__option:last-child {\n    margin-bottom: 0; }\n\n#smarteditoverlay .se-shared-slot__description {\n  margin-bottom: 16px; }\n\n#smarteditoverlay .se-shared-slot__link {\n  cursor: pointer;\n  color: #0a6ed1;\n  text-decoration: none;\n  text-transform: capitalize; }\n  #smarteditoverlay .se-shared-slot__link:hover {\n    text-decoration: none;\n    color: #085caf; }\n",""]),e.exports=t},function(e,t,n){"use strict";n.r(t),n.d(t,"Cmssmartedit",function(){return T}),n.d(t,"CmssmarteditModule",function(){return N});var o=n(1);function importAll(e){e.keys().forEach(function(t){e(t)})}var i=n(0),r=n(2),s=(n(45),n(4)),a=function(){function SlotContainerService(e,t,n,o,i,r,s){this.$q=e,this.lodash=t,this.experienceService=o;var a="/cmswebservices/v1/sites/"+i+"/catalogs/"+r+"/versions/"+s+"/pagescontentslotscontainers?pageId=:pageId";this.containersRestService=n.get(a)}var e,t,n;return SlotContainerService.$inject=["$q","lodash","restServiceFactory","experienceService","PAGE_CONTEXT_SITE_ID","PAGE_CONTEXT_CATALOG","PAGE_CONTEXT_CATALOG_VERSION"],SlotContainerService.prototype.getComponentContainer=function(e,t){var n=this;return this.loadContainersInPageInfo().then(function(o){var i=o.filter(function(o){return o.slotId===e&&n.lodash.includes(o.components,t)});return i.length>0?i[0]:null})},SlotContainerService.prototype.loadContainersInPageInfo=function(){var e=this;if(this.containersInPage)return this.$q.when(this.containersInPage);var t=this.experienceService.getCurrentExperience().then(function(t){return e.containersRestService.get({pageId:t.pageId})}).then(function(t){return e.containersInPage=t.pageContentSlotContainerList,e.containersInPage});return this.$q.when(t)},SlotContainerService=o.__decorate([Object(i.SeInjectable)(),o.__metadata("design:paramtypes",["function"==typeof(e="undefined"!=typeof angular&&angular.IQService)?e:Object,Object,"function"==typeof(t=void 0!==i.IRestServiceFactory&&i.IRestServiceFactory)?t:Object,"function"==typeof(n=void 0!==i.IExperienceService&&i.IExperienceService)?n:Object,String,String,String])],SlotContainerService)}(),c=function(){function HiddenComponentMenuService(e,t,n){this.$q=e,this.contextualMenuService=t,this.slotContainerService=n,this.MENU_ITEM_EXTERNAL="externalcomponentbutton",this.MENU_ITEM_CLONE="clonecomponentbutton",this.MENU_ITEM_REMOVE="se.cms.remove",this.allowedItems={},this._setDefaultItemsAllowed()}var e,t;return HiddenComponentMenuService.$inject=["$q","contextualMenuService","slotContainerService"],HiddenComponentMenuService.prototype.allowItemsInHiddenComponentMenu=function(e){var t=this;e.forEach(function(e){t.allowedItems[e]=!0})},HiddenComponentMenuService.prototype.removeAllowedItemsInHiddenComponentMenu=function(e){var t=this;e.forEach(function(e){delete t.allowedItems[e]})},HiddenComponentMenuService.prototype.getAllowedItemsInHiddenComponentMenu=function(){return Object.keys(this.allowedItems)},HiddenComponentMenuService.prototype.getItemsForHiddenComponent=function(e,t){var n=this;return this._validateComponent(e),this._buildComponentInfo(t,e).then(function(t){return n._getAllowedItemsForComponent(e,t)})},HiddenComponentMenuService.prototype._validateComponent=function(e){if(!e)throw new Error("HiddenComponentMenuService - Component cannot be null.");if(!e.uid)throw new Error("HiddenComponentMenuService - Component needs a uid.");if(!e.typeCode)throw new Error("HiddenComponentMenuService - Component needs a type code.");if(!e.uuid)throw new Error("HiddenComponentMenuService - Component needs a uuid.")},HiddenComponentMenuService.prototype._setDefaultItemsAllowed=function(){this.allowItemsInHiddenComponentMenu([this.MENU_ITEM_EXTERNAL,this.MENU_ITEM_CLONE,this.MENU_ITEM_REMOVE])},HiddenComponentMenuService.prototype._buildComponentInfo=function(e,t){return this.slotContainerService.getComponentContainer(e,t.uuid).then(function(n){return{componentType:t.typeCode,componentId:t.uid,componentAttributes:{smarteditCatalogVersionUuid:t.catalogVersion,smarteditComponentId:t.uid,smarteditComponentType:t.componentType,smarteditComponentUuid:t.uuid,smarteditElementUuid:null},containerType:n?n.containerType:null,containerId:n?n.containerId:null,element:null,isComponentHidden:!0,slotId:e,iLeftBtns:0}})},HiddenComponentMenuService.prototype._getAllowedItemsForComponent=function(e,t){var n=this,o=[],i=[],r=this.contextualMenuService.getContextualMenuByType(e.typeCode);return(r=s.copy(r)).filter(function(e){return n.allowedItems[e.key]}).forEach(function(e){var r=n.$q.defer();i.push(r.promise),n.$q.when(!e.condition||e.condition(t)).then(function(t){t&&o.push(e),r.resolve()})}),this.$q.all(i).then(function(){return{buttons:o,configuration:t}})},HiddenComponentMenuService=o.__decorate([Object(i.SeInjectable)(),o.__metadata("design:paramtypes",["function"==typeof(e=void 0!==s&&s.IQService)?e:Object,Object,"function"==typeof(t=void 0!==a&&a)?t:Object])],HiddenComponentMenuService)}(),l=function(){function SyncPollingService(e,t){this.systemEventService=e,this.SYNCHRONIZATION_POLLING=t,this.registerSyncPollingEvents()}var e,t;return SyncPollingService.$inject=["systemEventService","SYNCHRONIZATION_POLLING"],SyncPollingService.prototype.registerSyncPollingEvents=function(){this.systemEventService.subscribe(this.SYNCHRONIZATION_POLLING.SPEED_UP,this.changePollingSpeed.bind(this)),this.systemEventService.subscribe(this.SYNCHRONIZATION_POLLING.SLOW_DOWN,this.changePollingSpeed.bind(this))},SyncPollingService.prototype.changePollingSpeed=function(e,t){"proxyFunction";return null},SyncPollingService.prototype._fetchSyncStatus=function(e,t){"proxyFunction";return null},SyncPollingService.prototype.getSyncStatus=function(e,t){"proxyFunction";return null},SyncPollingService.prototype.performSync=function(e,t){"proxyFunction";return null},SyncPollingService=o.__decorate([Object(i.GatewayProxied)("getSyncStatus","_fetchSyncStatus","changePollingSpeed","registerSyncPollingEvents","performSync"),Object(i.SeInjectable)(),o.__metadata("design:paramtypes",["function"==typeof(e=void 0!==i.SystemEventService&&i.SystemEventService)?e:Object,"function"==typeof(t=void 0!==i.TypedMap&&i.TypedMap)?t:Object])],SyncPollingService)}(),d=n(10),u=n(8),p=n(9),m=function(e){function PageContentSlotsComponentsRestService(t,n,o,i,r,s,a){var c=e.call(this)||this;c.pageInfoService=n,c.cmsitemsRestService=o,c.lodash=i;var l="/cmswebservices/v1/sites/"+r+"/catalogs/"+s+"/versions/"+a+"/pagescontentslotscomponents?pageId=:pageId";return c.pagesContentSlotsComponentsRestService=t.get(l),c}var t,n,s,a;return PageContentSlotsComponentsRestService.$inject=["restServiceFactory","pageInfoService","cmsitemsRestService","lodash","PAGE_CONTEXT_SITE_ID","PAGE_CONTEXT_CATALOG","PAGE_CONTEXT_CATALOG_VERSION"],o.__extends(PageContentSlotsComponentsRestService,e),PageContentSlotsComponentsRestService.prototype.clearCache=function(){},PageContentSlotsComponentsRestService.prototype.getComponentsForSlot=function(e){var t=this;return this.pageInfoService.getPageUID().then(function(n){return t.getSlotsToComponentsMapForPageUid(n).then(function(t){return t[e]||[]})})},PageContentSlotsComponentsRestService.prototype.getSlotsToComponentsMapForPageUid=function(e){var t=this;return this.getCachedSlotsToComponentsMapForPageUid(e).then(function(e){return t.lodash.cloneDeep(e)})},PageContentSlotsComponentsRestService.prototype.getCachedSlotsToComponentsMapForPageUid=function(e){var t=this;return this.pagesContentSlotsComponentsRestService.get({pageId:e}).then(function(e){var n=e.pageContentSlotComponentList,o=n.map(function(e){return e.componentUuid});return o=Array.from(new Set(o)),t.cmsitemsRestService.getByIds(o).then(function(e){var t=(e.response||[]).reduce(function(e,t){return e[t.uuid]=t,e},{});return n.reduce(function(e,n){return e[n.slotId]=e[n.slotId]||[],t[n.componentUuid]&&e[n.slotId].push(t[n.componentUuid]),e},{})})})},o.__decorate([Object(i.InvalidateCache)(r.slotEvictionTag),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[]),o.__metadata("design:returntype",void 0)],PageContentSlotsComponentsRestService.prototype,"clearCache",null),o.__decorate([Object(i.Cached)({actions:[i.rarelyChangingContent],tags:[p.b,i.pageChangeEvictionTag,r.slotEvictionTag]}),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[String]),o.__metadata("design:returntype","function"==typeof(t="undefined"!=typeof Promise&&Promise)?t:Object)],PageContentSlotsComponentsRestService.prototype,"getCachedSlotsToComponentsMapForPageUid",null),PageContentSlotsComponentsRestService=o.__decorate([Object(i.GatewayProxied)("clearCache","getSlotsToComponentsMapForPageUid"),Object(i.SeInjectable)(),o.__metadata("design:paramtypes",["function"==typeof(n=void 0!==i.IRestServiceFactory&&i.IRestServiceFactory)?n:Object,"function"==typeof(s=void 0!==i.IPageInfoService&&i.IPageInfoService)?s:Object,Object,"function"==typeof(a=void 0!==u&&u.LoDashStatic)?a:Object,String,String,String])],PageContentSlotsComponentsRestService)}(d.a),S=function(e){function EditorModalService(){return e.call(this)||this}return o.__extends(EditorModalService,e),EditorModalService=o.__decorate([Object(i.GatewayProxied)("open","openAndRerenderSlot"),Object(i.SeInjectable)(),o.__metadata("design:paramtypes",[])],EditorModalService)}(function(){function IEditorModalService(){}return IEditorModalService.prototype.open=function(e,t,n,o,i,r){"proxyFunction";return null},IEditorModalService.prototype.openAndRerenderSlot=function(e,t,n,o,i){"proxyFunction";return null},IEditorModalService}()),h=function(e){function ComponentSharedService(t,n){var o=e.call(this)||this;return o.componentInfoService=t,o.$q=n,o}var t;return ComponentSharedService.$inject=["componentInfoService","$q"],o.__extends(ComponentSharedService,e),ComponentSharedService.prototype.isComponentShared=function(e){var t=this;return("string"==typeof e?this.componentInfoService.getById(e):this.$q.when(e)).then(function(e){return e.slots?e.slots.length>1:t.$q.reject("ComponentSharedService::isComponentShared - Component must have slots property.")})},ComponentSharedService=o.__decorate([Object(i.GatewayProxied)(),Object(i.SeInjectable)(),o.__metadata("design:paramtypes",[Object,"function"==typeof(t="undefined"!=typeof angular&&angular.IQService)?t:Object])],ComponentSharedService)}(r.IComponentSharedService),v=function(e){function PageService(){return e.call(this)||this}return o.__extends(PageService,e),PageService=o.__decorate([Object(i.SeInjectable)(),Object(i.GatewayProxied)(),o.__metadata("design:paramtypes",[])],PageService)}(r.IPageService),g=function(e){function ContextAwareEditableItemService(){return e.call(this)||this}return o.__extends(ContextAwareEditableItemService,e),ContextAwareEditableItemService=o.__decorate([Object(i.SeInjectable)(),Object(i.GatewayProxied)(),o.__metadata("design:paramtypes",[])],ContextAwareEditableItemService)}(r.IContextAwareEditableItemService),y=function(){function CmsSmarteditServicesModule(){}return CmsSmarteditServicesModule=o.__decorate([Object(i.SeModule)({imports:["yLoDashModule","smarteditServicesModule",r.CmsConstantsModule],providers:[i.diNameUtils.makeValueProvider({cmsitemsUri:p.c}),p.a,S,l,a,h,c,r.AssetsService,r.CMSModesService,r.CMSTimeService,m,r.AttributePermissionsRestService,r.TypePermissionsRestService,v,g,r.ComponentService,r.SynchronizationService]})],CmsSmarteditServicesModule)}();window.__smartedit__.addDecoratorPayload("SeComponent","SlotSynchronizationPanel",{templateUrl:"slotSynchronizationPanelTemplate.html",inputs:["slotId"]});var f=function(){function SlotSynchronizationPanel(e,t,n,o,i,r){var s=this;this.pageService=e,this.pageInfoService=t,this.slotSynchronizationService=n,this.pageContentSlotsService=o,this.$translate=i,this.$q=r,this.getSyncStatus=function(){var e=s.pageInfoService.getPageUID().then(function(e){return s.slotSynchronizationService.getSyncStatus(e,s.slotId).then(function(e){return s.isSyncDisallowed().then(function(t){return t&&s.disableSync(),e})})});return s.$q.when(e)},this.performSync=function(e){return s.slotSynchronizationService.performSync(e)}}var e,t,n,s,a;return SlotSynchronizationPanel.$inject=["pageService","pageInfoService","slotSynchronizationService","pageContentSlotsService","$translate","$q"],SlotSynchronizationPanel.prototype.getApi=function(e){this.synchronizationPanelApi=e},SlotSynchronizationPanel.prototype.isSyncDisallowed=function(){var e=this;return this.isPageSlot().then(function(t){return e.isPageApproved().then(function(e){return t&&!e})})},SlotSynchronizationPanel.prototype.isPageSlot=function(){return this.pageContentSlotsService.getSlotStatus(this.slotId).then(function(e){return e===r.SlotStatus.PAGE||e===r.SlotStatus.OVERRIDE})},SlotSynchronizationPanel.prototype.isPageApproved=function(){var e=this,t=this.pageInfoService.getPageUUID().then(function(t){return e.pageService.isPageApproved(t)});return this.$q.when(t)},SlotSynchronizationPanel.prototype.disableSync=function(){this.synchronizationPanelApi.setMessage({type:i.IAlertServiceType.WARNING,description:this.$translate.instant("se.cms.synchronization.slot.disabled.msg")}),this.synchronizationPanelApi.disableItemList(!0)},SlotSynchronizationPanel=o.__decorate([Object(i.SeComponent)({templateUrl:"slotSynchronizationPanelTemplate.html",inputs:["slotId"]}),o.__metadata("design:paramtypes",["function"==typeof(e=void 0!==r.IPageService&&r.IPageService)?e:Object,"function"==typeof(t=void 0!==i.IPageInfoService&&i.IPageInfoService)?t:Object,Object,Object,"function"==typeof(s="undefined"!=typeof angular&&void 0!==(n=angular.translate)&&n.ITranslateService)?s:Object,"function"==typeof(a="undefined"!=typeof angular&&angular.IQService)?a:Object])],SlotSynchronizationPanel)}(),_=n(12);window.__smartedit__.addDecoratorPayload("SeComponent","SharedComponentButton",{templateUrl:"sharedComponentButtonTemplate.html",inputs:["smarteditComponentId"]});var C=function(){function SharedComponentButton(e){this.contextAwareEditableItemService=e,this.isReady=!1}var e;return SharedComponentButton.$inject=["contextAwareEditableItemService"],SharedComponentButton.prototype.$onInit=function(){var e=this;this.contextAwareEditableItemService.isItemEditable(this.smarteditComponentId).then(function(t){e.isReady=!0,e.message="se.cms.contextmenu.shared.component.info.msg"+(t?".editable":"")})},SharedComponentButton=o.__decorate([Object(i.SeComponent)({templateUrl:"sharedComponentButtonTemplate.html",inputs:["smarteditComponentId"]}),o.__metadata("design:paramtypes",["function"==typeof(e=void 0!==_.IContextAwareEditableItemService&&_.IContextAwareEditableItemService)?e:Object])],SharedComponentButton)}(),E=function(){function CmsComponentsModule(){}return CmsComponentsModule=o.__decorate([Object(i.SeModule)({imports:["slotSynchronizationServiceModule","pageContentSlotsServiceModule",y,r.SynchronizationPanelModule],declarations:[f,C]})],CmsComponentsModule)}(),I=(n(85),function(){function CmsDragAndDropService(e,t,n,o,i,r,s,a,c,l,d,u,p,m,S,h,v,g,y,f,_,C,E,I){this.$q=e,this.$window=t,this.$translate=n,this.yjQuery=o,this.dragAndDropService=i,this.componentHandlerService=r,this.systemEventService=s,this.gatewayFactory=a,this.slotRestrictionsService=c,this.alertService=l,this.assetsService=d,this.browserService=u,this.componentEditingFacade=p,this.waitDialogService=m,this.pageContentSlotsComponentsRestService=S,this.DRAG_AND_DROP_EVENTS=h,this.COMPONENT_REMOVED_EVENT=v,this.CONTENT_SLOT_TYPE=g,this.OVERLAY_RERENDERED_EVENT=y,this.CONTRACT_CHANGE_LISTENER_PROCESS_EVENTS=f,this.SMARTEDIT_COMPONENT_PROCESS_STATUS=_,this.CONTRACT_CHANGE_LISTENER_COMPONENT_PROCESS_STATUS=C,this.COMPONENT_IN_SLOT_STATUS=E,this.domain=I,this.cachedSlots={},this.highlightedSlot=null,this.highlightedComponent=null,this.highlightedHint=null,this.dragInfo=null,this.overlayRenderedUnSubscribeFn=null,this.componentRemovedUnSubscribeFn=null,this.gateway=this.gatewayFactory.createGateway("cmsDragAndDrop")}var e,t,n,a,c,l,d,u,p,m,S,h,v,g,y,f,_,C;return CmsDragAndDropService.$inject=["$q","$window","$translate","yjQuery","dragAndDropService","componentHandlerService","systemEventService","gatewayFactory","slotRestrictionsService","alertService","assetsService","browserService","componentEditingFacade","waitDialogService","pageContentSlotsComponentsRestService","DRAG_AND_DROP_EVENTS","COMPONENT_REMOVED_EVENT","CONTENT_SLOT_TYPE","OVERLAY_RERENDERED_EVENT","CONTRACT_CHANGE_LISTENER_PROCESS_EVENTS","SMARTEDIT_COMPONENT_PROCESS_STATUS","CONTRACT_CHANGE_LISTENER_COMPONENT_PROCESS_STATUS","COMPONENT_IN_SLOT_STATUS","domain"],e=CmsDragAndDropService,CmsDragAndDropService.prototype.register=function(){this.dragAndDropService.register({id:e.CMS_DRAG_AND_DROP_ID,sourceSelector:[e.SOURCE_SELECTOR,e.MORE_MENU_SOURCE_SELECTOR],targetSelector:e.TARGET_SELECTOR,startCallback:this.onStart.bind(this),dragEnterCallback:this.onDragEnter.bind(this),dragOverCallback:this.onDragOver.bind(this),dropCallback:this.onDrop.bind(this),outCallback:this.onDragLeave.bind(this),stopCallback:this.onStop.bind(this),enableScrolling:!0,helper:this.getDragImageSrc.bind(this)})},CmsDragAndDropService.prototype.unregister=function(){this.dragAndDropService.unregister([e.CMS_DRAG_AND_DROP_ID]),this.overlayRenderedUnSubscribeFn&&this.overlayRenderedUnSubscribeFn(),this.componentRemovedUnSubscribeFn&&this.componentRemovedUnSubscribeFn()},CmsDragAndDropService.prototype.apply=function(){var t=this;this.dragAndDropService.apply(e.CMS_DRAG_AND_DROP_ID),this.addUIHelpers(),this.overlayRenderedUnSubscribeFn=this.systemEventService.subscribe(this.OVERLAY_RERENDERED_EVENT,this.onOverlayUpdate.bind(this)),this.componentRemovedUnSubscribeFn=this.systemEventService.subscribe(this.COMPONENT_REMOVED_EVENT,this.onOverlayUpdate.bind(this)),this.gateway.subscribe(this.DRAG_AND_DROP_EVENTS.DRAG_STARTED,function(e,n){t.dragAndDropService.markDragStarted(),t.initializeDragOperation(n)}),this.gateway.subscribe(this.DRAG_AND_DROP_EVENTS.DRAG_STOPPED,function(){t.dragAndDropService.markDragStopped(),t.cleanDragOperation()})},CmsDragAndDropService.prototype.update=function(){this.dragAndDropService.update(e.CMS_DRAG_AND_DROP_ID),this.addUIHelpers(),this.cacheElements()},CmsDragAndDropService.prototype.onOverlayUpdate=function(){return this.update(),this.$q.resolve()},CmsDragAndDropService.prototype.onStart=function(t){var n=this.getSelector(t.target);n.attr("data-component-id")||(n=this.yjQuery(n).closest("[data-component-id]"));var o=n.closest(e.COMPONENT_SELECTOR),i=o.closest(e.SLOT_SELECTOR),r=o.length>0?this.componentHandlerService.getId(o):n.attr("data-component-id"),s=o.length>0?this.componentHandlerService.getSlotOperationRelatedUuid(o):n.attr("data-component-uuid"),a=o.length>0?this.componentHandlerService.getType(o):n.attr("data-component-type"),c=o.length>0?this.componentHandlerService.getSlotOperationRelatedId(o):n.attr("data-component-id"),l=o.length>0?this.componentHandlerService.getSlotOperationRelatedType(o):n.attr("data-component-type"),d=o.length>0?this.componentHandlerService.getId(i):n.attr("data-slot-id"),u={componentId:r,componentUuid:s,componentType:a,slotUuid:o.length>0?this.componentHandlerService.getId(i):n.attr("data-slot-uuid"),slotId:d,slotOperationRelatedId:c,slotOperationRelatedType:l};o.addClass(e.CSS_CLASSES.COMPONENT_DRAGGED),this.initializeDragOperation(u),this.toggleKeepVisibleComponentAndSlot(!0)},CmsDragAndDropService.prototype.onDragEnter=function(e){this.highlightSlot(e)},CmsDragAndDropService.prototype.onDragOver=function(t){var n=this;this.highlightSlot(t).then(function(){if(n.highlightedSlot&&n.highlightedSlot.isAllowed){var o=n.componentHandlerService.getId(n.highlightedSlot.original);if(!n.highlightedHint||!n.isMouseInRegion(t,n.highlightedHint)){n.highlightedHint&&n.clearHighlightedHint();var i=n.cachedSlots[o];i.components.length>0&&(n.highlightedComponent&&n.isMouseInRegion(t,n.highlightedComponent)||(n.clearHighlightedComponent(),i.components.forEach(function(e){return!n.isMouseInRegion(t,e)||(n.highlightedComponent=e,!1)})),n.highlightedComponent&&n.highlightedComponent.hints&&n.highlightedComponent.hints.forEach(function(e){return!n.isMouseInRegion(t,e)||(n.highlightedHint=e,!1)})),n.highlightedComponent&&n.highlightedComponent.id===n.dragInfo.slotOperationRelatedId?n.highlightedComponent.original.addClass(e.CSS_CLASSES.COMPONENT_DRAGGED_HOVERED):n.highlightedHint&&n.highlightedSlot.isAllowed&&(n.highlightedHint.original.addClass(e.CSS_CLASSES.DROPZONE_HOVERED),n.highlightedSlot.mayBeAllowed&&n.highlightedHint.original.addClass(e.CSS_CLASSES.DROPZONE_MAY_BE_ALLOWED))}}})},CmsDragAndDropService.prototype.onDrop=function(e){var t=this;if(this.highlightedSlot){var n=this.dragInfo.slotId,o=this.componentHandlerService.getId(this.highlightedSlot.original),i=this.componentHandlerService.getUuid(this.highlightedSlot.original),r=this.dragInfo.componentId,s=this.dragInfo.slotOperationRelatedId||this.dragInfo.componentId,a=this.dragInfo.slotOperationRelatedType||this.dragInfo.componentType;if(!this.highlightedSlot.isAllowed){var c=this.$translate.instant("se.drag.and.drop.not.valid.component.type",{slotUID:o,componentUID:s});return void this.alertService.showDanger({message:c})}if(this.highlightedHint||0===this.highlightedSlot.components.length){var l=this.highlightedHint?this.highlightedHint.position:0,d=void 0;if(this.waitDialogService.showWaitModal(),n){if(n===o){var u=this.getComponentPositionFromCachedSlot(n,r);if(u<l)l--;else if(u===l)return void this.waitDialogService.hideWaitModal()}d=this.componentEditingFacade.moveComponent(n,o,s,l)}else if(r){var p={componentId:r,componentUuid:this.dragInfo.componentUuid,componentType:a},m={targetSlotId:o,dragInfo:p,position:l};d=this.dragInfo.cloneOnDrop?this.componentEditingFacade.cloneExistingComponentToSlot(m):this.componentEditingFacade.addExistingComponentToSlot(o,p,l)}else{var S={targetSlotId:o,targetSlotUUId:i},h=this.componentHandlerService.getCatalogVersionUuid(this.highlightedSlot.original);d=this.componentEditingFacade.addNewComponentToSlot(S,h,a,l)}d.then(function(){t.scrollToModifiedSlot(o)},function(){t.onStop(e)}).finally(function(){t.waitDialogService.hideWaitModal()})}}},CmsDragAndDropService.prototype.getComponentPositionFromCachedSlot=function(e,t){var n=this,o=this.cachedSlots[e],i=(o&&o.components?o.components:[]).find(function(e){return n.componentHandlerService.getId(e.original)===t});return i?i.position:this.componentHandlerService.getComponentPositionInSlot(e,t)},CmsDragAndDropService.prototype.onDragLeave=function(e){if(this.highlightedSlot){var t=this.componentHandlerService.getId(this.highlightedSlot.original),n=this.cachedSlots[t];this.isMouseInRegion(e,n)||this.clearHighlightedSlot()}},CmsDragAndDropService.prototype.onStop=function(t){var n=this.getSelector(t.target).closest(e.COMPONENT_SELECTOR);this.toggleKeepVisibleComponentAndSlot(!1),this.cleanDragOperation(n),this.systemEventService.publish(this.CONTRACT_CHANGE_LISTENER_PROCESS_EVENTS.RESTART_PROCESS)},CmsDragAndDropService.prototype.getDragImageSrc=function(){var t="";return this.browserService.isSafari()&&(t=this.assetsService.getAssetsRoot()+e.DEFAULT_DRAG_IMG),this.domain+t},CmsDragAndDropService.prototype.initializeDragOperation=function(t){this.dragInfo=t,this.cacheElements(),this.componentHandlerService.getOverlay().addClass(e.CSS_CLASSES.OVERLAY_IN_DRAG_DROP),this.systemEventService.publishAsync(this.DRAG_AND_DROP_EVENTS.DRAG_STARTED)},CmsDragAndDropService.prototype.cleanDragOperation=function(t){this.clearHighlightedSlot(),t&&t.removeClass(e.CSS_CLASSES.COMPONENT_DRAGGED),this.componentHandlerService.getOverlay().removeClass(e.CSS_CLASSES.OVERLAY_IN_DRAG_DROP),this.systemEventService.publishAsync(this.DRAG_AND_DROP_EVENTS.DRAG_STOPPED),this.dragInfo=null,this.cachedSlots={},this.highlightedSlot=null},CmsDragAndDropService.prototype.highlightSlot=function(t){var n,i=this,r=this.yjQuery(t.target).closest(e.SLOT_SELECTOR),s=this.componentHandlerService.getId(r);if(this.highlightedSlot&&(n=this.componentHandlerService.getId(this.highlightedSlot.original))!==s&&this.clearHighlightedSlot(),!this.highlightedSlot||void 0===this.highlightedSlot.isAllowed){this.highlightedSlot=this.cachedSlots[s];var a=o.__assign({},this.dragInfo);return a.componentId=this.dragInfo.slotOperationRelatedId||this.dragInfo.componentId,a.componentType=this.dragInfo.slotOperationRelatedType||this.dragInfo.componentType,a.cloneOnDrop&&delete a.componentId,this.slotRestrictionsService.isComponentAllowedInSlot(this.highlightedSlot,a).then(function(o){i.slotRestrictionsService.isSlotEditable(s).then(function(a){if(i.highlightedSlot&&i.highlightedSlot.id===s){var c=o===i.COMPONENT_IN_SLOT_STATUS.ALLOWED&&a,l=o===i.COMPONENT_IN_SLOT_STATUS.MAYBEALLOWED&&a;i.highlightedSlot.isAllowed=c||l,i.highlightedSlot.mayBeAllowed=l,i.highlightedSlot.isAllowed?(r.addClass(e.CSS_CLASSES.SLOT_ALLOWED),l&&r.addClass(e.CSS_CLASSES.SLOT_MAY_BE_ALLOWED)):r.addClass(e.CSS_CLASSES.SLOT_NOT_ALLOWED),"dragenter"!==t.type||n&&n===s||i.highlightedSlot&&i.highlightedSlot.id===s&&(i.systemEventService.publish(s+"_SHOW_SLOT_MENU"),i.systemEventService.publish(i.DRAG_AND_DROP_EVENTS.DRAG_OVER,s))}})})}return this.$q.resolve()},CmsDragAndDropService.prototype.addUIHelpers=function(){var t=this.componentHandlerService.getOverlay();t.find("."+e.CSS_CLASSES.UI_HELPER_OVERLAY).remove();var n=this;t.find(e.SLOT_SELECTOR).each(function(){var t=n.yjQuery(this),o=t[0].offsetHeight,i=t[0].offsetWidth,r=t.find(e.COMPONENT_SELECTOR);if(0===r.length){var s=n.yjQuery("<div></div>");s.addClass(e.CSS_CLASSES.UI_HELPER_OVERLAY);var a=n.yjQuery("<div></div>");a.addClass(e.CSS_CLASSES.DROPZONE),a.addClass(e.CSS_CLASSES.DROPZONE_FULL),s.height(o),s.width(i),s.append(a),t.append(s)}else r.each(function(){var t=n.yjQuery(this),o=t[0].offsetHeight,r=t[0].offsetWidth,s=n.yjQuery("<div></div>");s.addClass(e.CSS_CLASSES.UI_HELPER_OVERLAY),s.height(o),s.width(r);var a=n.yjQuery("<div></div>"),c=n.yjQuery("<div></div>");a.addClass(e.CSS_CLASSES.DROPZONE),c.addClass(e.CSS_CLASSES.DROPZONE),r===i?(a.addClass(e.CSS_CLASSES.DROPZONE_TOP),c.addClass(e.CSS_CLASSES.DROPZONE_BOTTOM)):(a.addClass(e.CSS_CLASSES.DROPZONE_LEFT),c.addClass(e.CSS_CLASSES.DROPZONE_RIGHT)),s.append(a),s.append(c),t.append(s)})})},CmsDragAndDropService.prototype.cacheElements=function(){var t=this.componentHandlerService.getOverlay();if(t){var n=this.getWindowScrolling(),o=this;t.find(e.SLOT_SELECTOR).each(function(){var t=o.yjQuery(this),i=o.componentHandlerService.getId(t),r=o.componentHandlerService.getUuid(t);o.pageContentSlotsComponentsRestService.getComponentsForSlot(i).then(function(s){var a={id:i,uuid:r,original:t,components:[],rect:o.getElementRects(t,n),hint:null},c=t.children(e.COMPONENT_SELECTOR);if(0===c.length){var l=t.find(e.HINT_SELECTOR);a.hint=l.length>0?{original:l,rect:o.getElementRects(l,n)}:null}else c.each(function(t){var i=o.yjQuery(this),r=s.findIndex(function(e){return e.uuid===o.componentHandlerService.getUuid(i)});-1===r&&(r=t);var c={id:o.componentHandlerService.getSlotOperationRelatedId(i),type:o.componentHandlerService.getSlotOperationRelatedType(i),original:i,position:r,hints:[],rect:o.getElementRects(i,n)},l=r++;i.find(e.HINT_SELECTOR).each(function(){var e=o.yjQuery(this),t={original:e,position:l++,rect:o.getElementRects(e,n)};c.hints.push(t)}),a.components.push(c)});o.cachedSlots[a.id]=a})})}},CmsDragAndDropService.prototype.clearHighlightedHint=function(){this.highlightedHint&&(this.highlightedHint.original.removeClass(e.CSS_CLASSES.DROPZONE_HOVERED),this.highlightedHint.original.removeClass(e.CSS_CLASSES.DROPZONE_MAY_BE_ALLOWED),this.highlightedHint=null)},CmsDragAndDropService.prototype.clearHighlightedComponent=function(){this.clearHighlightedHint(),this.highlightedComponent&&(this.highlightedComponent.original.removeClass(e.CSS_CLASSES.COMPONENT_DRAGGED_HOVERED),this.highlightedComponent=null)},CmsDragAndDropService.prototype.clearHighlightedSlot=function(){this.clearHighlightedComponent(),this.highlightedSlot&&(this.highlightedSlot.original.removeClass(e.CSS_CLASSES.SLOT_ALLOWED),this.highlightedSlot.original.removeClass(e.CSS_CLASSES.SLOT_NOT_ALLOWED),this.highlightedSlot.original.removeClass(e.CSS_CLASSES.SLOT_MAY_BE_ALLOWED),this.systemEventService.publish("HIDE_SLOT_MENU"),this.systemEventService.publish(this.DRAG_AND_DROP_EVENTS.DRAG_LEAVE)),this.highlightedSlot=null},CmsDragAndDropService.prototype.isMouseInRegion=function(e,t){var n=t.rect;return e.pageX>=n.left&&e.pageX<=n.right&&e.pageY>=n.top&&e.pageY<=n.bottom},CmsDragAndDropService.prototype.getElementRects=function(e,t){var n=e[0].getBoundingClientRect();return{left:n.left,right:n.right,bottom:n.bottom+t,top:n.top+t}},CmsDragAndDropService.prototype.getWindowScrolling=function(){return this.$window.pageYOffset},CmsDragAndDropService.prototype.scrollToModifiedSlot=function(e){var t=this.componentHandlerService.getComponentInOverlay(e,this.CONTENT_SLOT_TYPE);t&&t.length>0&&t[0].scrollIntoView()},CmsDragAndDropService.prototype.getSelector=function(e){return this.yjQuery(e)},CmsDragAndDropService.prototype.toggleKeepVisibleComponentAndSlot=function(e){var t=this;if(this.dragInfo){var n=e?this.CONTRACT_CHANGE_LISTENER_COMPONENT_PROCESS_STATUS.KEEP_VISIBLE:this.CONTRACT_CHANGE_LISTENER_COMPONENT_PROCESS_STATUS.PROCESS;this.yjQuery.each(this.componentHandlerService.getComponentUnderSlot(this.dragInfo.componentId,this.dragInfo.componentType,this.dragInfo.slotId),function(e,o){o.dataset[t.SMARTEDIT_COMPONENT_PROCESS_STATUS]=n}),this.yjQuery.each(this.componentHandlerService.getComponent(this.dragInfo.slotId,this.CONTENT_SLOT_TYPE),function(e,o){o.dataset[t.SMARTEDIT_COMPONENT_PROCESS_STATUS]=n})}},CmsDragAndDropService.CMS_DRAG_AND_DROP_ID="se.cms.dragAndDrop",CmsDragAndDropService.TARGET_SELECTOR="#smarteditoverlay .smartEditComponentX[data-smartedit-component-type='ContentSlot']",CmsDragAndDropService.SOURCE_SELECTOR="#smarteditoverlay .smartEditComponentX[data-smartedit-component-type!='ContentSlot'] .movebutton",CmsDragAndDropService.MORE_MENU_SOURCE_SELECTOR=".movebutton",CmsDragAndDropService.SLOT_SELECTOR=".smartEditComponentX[data-smartedit-component-type='ContentSlot']",CmsDragAndDropService.COMPONENT_SELECTOR=".smartEditComponentX[data-smartedit-component-type!='ContentSlot']",CmsDragAndDropService.HINT_SELECTOR=".overlayDropzone",CmsDragAndDropService.CSS_CLASSES={UI_HELPER_OVERLAY:"overlayDnd",DROPZONE:"overlayDropzone",DROPZONE_FULL:"overlayDropzone--full",DROPZONE_TOP:"overlayDropzone--top",DROPZONE_BOTTOM:"overlayDropzone--bottom",DROPZONE_LEFT:"overlayDropzone--left",DROPZONE_RIGHT:"overlayDropzone--right",DROPZONE_HOVERED:"overlayDropzone--hovered",DROPZONE_MAY_BE_ALLOWED:"overlayDropzone--mayBeAllowed",OVERLAY_IN_DRAG_DROP:"smarteditoverlay_dndRendering",COMPONENT_DRAGGED:"component_dragged",COMPONENT_DRAGGED_HOVERED:"component_dragged_hovered",SLOTS_MARKED:"slot-marked",SLOT_ALLOWED:"over-slot-enabled",SLOT_NOT_ALLOWED:"over-slot-disabled",SLOT_MAY_BE_ALLOWED:"over-slot-maybeenabled"},CmsDragAndDropService.DEFAULT_DRAG_IMG="/images/contextualmenu_move_on.png",CmsDragAndDropService=e=o.__decorate([Object(i.SeInjectable)(),o.__metadata("design:paramtypes",["function"==typeof(t=void 0!==s&&s.IQService)?t:Object,"function"==typeof(n=void 0!==s&&s.IWindowService)?n:Object,"function"==typeof(c=void 0!==s&&void 0!==(a=s.translate)&&a.ITranslateService)?c:Object,"function"==typeof(l="undefined"!=typeof JQueryStatic&&JQueryStatic)?l:Object,"function"==typeof(d=void 0!==i.DragAndDropService&&i.DragAndDropService)?d:Object,Object,"function"==typeof(u=void 0!==i.SystemEventService&&i.SystemEventService)?u:Object,"function"==typeof(p=void 0!==i.GatewayFactory&&i.GatewayFactory)?p:Object,Object,"function"==typeof(m=void 0!==i.IAlertService&&i.IAlertService)?m:Object,"function"==typeof(S=void 0!==r.AssetsService&&r.AssetsService)?S:Object,"function"==typeof(h=void 0!==i.IBrowserService&&i.IBrowserService)?h:Object,Object,"function"==typeof(v=void 0!==i.IWaitDialogService&&i.IWaitDialogService)?v:Object,"function"==typeof(g=void 0!==r.IPageContentSlotsComponentsRestService&&r.IPageContentSlotsComponentsRestService)?g:Object,"function"==typeof(y=void 0!==i.TypedMap&&i.TypedMap)?y:Object,String,String,String,"function"==typeof(f=void 0!==i.TypedMap&&i.TypedMap)?f:Object,String,"function"==typeof(_=void 0!==i.TypedMap&&i.TypedMap)?_:Object,"function"==typeof(C=void 0!==i.TypedMap&&i.TypedMap)?C:Object,String])],CmsDragAndDropService)}()),b=function(){function CmsDragAndDropServiceModule(){}return CmsDragAndDropServiceModule=o.__decorate([Object(i.SeModule)({imports:["yLoDashModule","legacySmarteditCommonsModule","slotRestrictionsServiceModule","componentEditingFacadeModule","translationServiceModule","removeComponentServiceModule","cmsSmarteditServicesModule","browserServiceModule","seConstantsModule"],providers:[I,{provide:"DRAG_AND_DROP_EVENTS",useValue:{DRAG_STARTED:"CMS_DRAG_STARTED",DRAG_STOPPED:"CMS_DRAG_STOPPED",DRAG_OVER:"CMS_DRAG_OVER",DRAG_LEAVE:"CMS_DRAG_LEAVE"}},{provide:"ENABLE_CLONE_ON_DROP",useValue:"enableCloneComponentOnDrop"}]})],CmsDragAndDropServiceModule)}();!function doImport(){importAll(n(52)),importAll(n(77))}();var T=function(){function Cmssmartedit(){}return Cmssmartedit=o.__decorate([Object(i.SeModule)({imports:[y,E,r.CmsResourceLocationsModule,"resourceLocationsModule","decoratorServiceModule","removeComponentServiceModule","editorEnablerServiceModule","alertServiceModule","translationServiceModule","slotVisibilityButtonModule","slotVisibilityServiceModule","cmssmarteditTemplates","cmscommonsTemplates","smarteditServicesModule","slotSharedButtonModule",b,"slotSyncButtonModule","confirmationModalServiceModule","sharedSlotDisabledDecoratorModule","externalSlotDisabledDecoratorModule","slotRestrictionsServiceModule","slotSharedServiceModule","contextualMenuDropdownServiceModule","externalComponentDecoratorModule","externalComponentButtonModule","componentEditingFacadeModule","slotUnsharedButtonModule","componentInfoServiceModule"],initialize:["$rootScope","$q","$translate","alertService","assetsService","cmsDragAndDropService","componentHandlerService","pageInfoService","confirmationModalService","contextualMenuService","decoratorService","editorEnablerService","featureService","removeComponentService","slotRestrictionsService","slotSharedService","slotVisibilityService","componentEditingFacade","cmsitemsRestService","componentInfoService","componentSharedService","crossFrameEventService","EVENT_SMARTEDIT_COMPONENT_UPDATED","typePermissionsRestService",function(e,t,n,o,i,r,s,a,c,l,d,u,p,m,S,h,v,g,y,f,_,C,E,I){"ngInject";u.enableForComponents(["^((?!Slot).)*$"]),d.addMappings({"^((?!Slot).)*$":["se.contextualMenu","externalComponentDecorator"],"^.*Slot$":["se.slotContextualMenu","se.basicSlotContextualMenu","syncIndicator","sharedSlotDisabledDecorator","externalSlotDisabledDecorator"]}),p.addContextualMenuButton({key:"externalcomponentbutton",priority:100,nameI18nKey:"se.cms.contextmenu.title.externalcomponent",i18nKey:"se.cms.contextmenu.title.externalcomponentbutton",regexpKeys:["^((?!Slot).)*$"],condition:function(e){var t=s.getParentSlotForComponent(e.element);return S.isSlotEditable(t).then(function(t){if(!t)return!1;var n=e.componentAttributes&&e.componentAttributes.smarteditCatalogVersionUuid;return n?a.getCatalogVersionUUIDFromPage().then(function(e){return n!==e}):s.isExternalComponent(e.componentId,e.componentType)})},action:{template:'<external-component-button data-catalog-version-uuid="ctrl.componentAttributes.smarteditCatalogVersionUuid"></external-component-button>'},displayClass:"externalcomponentbutton",displayIconClass:"hyicon hyicon-globe",displaySmallIconClass:"hyicon hyicon-globe"}),p.addContextualMenuButton({key:"se.cms.dragandropbutton",priority:200,nameI18nKey:"se.cms.contextmenu.title.dragndrop",i18nKey:"se.cms.contextmenu.title.dragndrop",regexpKeys:["^((?!Slot).)*$"],condition:function(e){var t=s.getParentSlotForComponent(e.element);return S.isSlotEditable(t).then(function(t){return!!t&&I.hasUpdatePermissionForTypes([e.componentType]).then(function(t){return t[e.componentType]})})},action:{callbacks:{mousedown:function(){r.update()}}},displayClass:"movebutton",displayIconClass:"sap-icon--move",displaySmallIconClass:"sap-icon--move",permissions:["se.context.menu.drag.and.drop.component"]}),p.register({key:"se.cms.html5DragAndDrop",nameI18nKey:"se.cms.dragAndDrop.name",descriptionI18nKey:"se.cms.dragAndDrop.description",enablingCallback:function(){r.register(),r.apply()},disablingCallback:function(){r.unregister()}}),p.addContextualMenuButton({key:"se.cms.sharedcomponentbutton",priority:300,nameI18nKey:"se.cms.contextmenu.title.shared.component",i18nKey:"se.cms.contextmenu.title.shared.component",regexpKeys:["^((?!Slot).)*$"],condition:function(e){var t=s.getParentSlotForComponent(e.element);return Promise.all([s.isExternalComponent(e.componentId,e.componentType),S.isSlotEditable(t)]).then(function(t){return!(t[0]||!t[1])&&_.isComponentShared(e.componentAttributes.smarteditComponentUuid)})},action:{template:'<shared-component-button data-smartedit-component-id="ctrl.componentAttributes.smarteditComponentId"></shared-component-button>'},displayClass:"shared-component-button",displayIconClass:"sap-icon--chain-link",displaySmallIconClass:"sap-icon--chain-link",permissions:[]}),p.addContextualMenuButton({key:"se.cms.remove",priority:500,customCss:"se-contextual-more-menu__item--delete",i18nKey:"se.cms.contextmenu.title.remove",nameI18nKey:"se.cms.contextmenu.title.remove",regexpKeys:["^((?!Slot).)*$"],condition:function(e){if(!e.isComponentHidden){var t=s.getParentSlotForComponent(e.element);return S.isSlotEditable(t).then(function(t){return!!t&&I.hasDeletePermissionForTypes([e.componentType]).then(function(t){return t[e.componentType]})})}return I.hasDeletePermissionForTypes([e.componentType]).then(function(t){return t[e.componentType]})},action:{callback:function(e,t){var i,r;e.element?(i=s.getSlotOperationRelatedId(e.element),r=s.getSlotOperationRelatedType(e.element)):(i=e.containerId?e.containerId:e.componentId,r=e.containerId&&e.containerType?e.containerType:e.componentType);var a={description:"se.cms.contextmenu.removecomponent.confirmation.message",title:"se.cms.contextmenu.removecomponent.confirmation.title"};c.confirm(a).then(function(){m.removeComponent({slotId:e.slotId,slotUuid:e.slotUuid,componentId:e.componentId,componentType:e.componentType,componentUuid:e.componentAttributes.smarteditComponentUuid,slotOperationRelatedId:i,slotOperationRelatedType:r}).then(function(){v.reloadSlotsInfo(),C.publish(E,{componentId:e.componentId,componentType:e.componentType,requiresReplayingDecorators:!0}),n("se.cms.alert.component.removed.from.slot",{componentID:i,slotID:e.slotId}).then(function(e){o.showSuccess({message:e}),t.preventDefault(),t.stopPropagation()})})})}},displayClass:"removebutton",displayIconClass:"sap-icon--decline",displaySmallIconClass:"sap-icon--decline",permissions:["se.context.menu.remove.component"]}),p.addContextualMenuButton({key:"se.slotContextualMenuVisibility",nameI18nKey:"slotcontextmenu.title.visibility",regexpKeys:["^.*ContentSlot$"],action:{templateUrl:"slotVisibilityWidgetTemplate.html"},permissions:["se.slot.context.menu.visibility"]}),p.addContextualMenuButton({key:"se.slotSharedButton",nameI18nKey:"slotcontextmenu.title.shared.button",regexpKeys:["^.*Slot$"],action:{templateUrl:"slotSharedTemplate.html"},permissions:["se.slot.context.menu.shared.icon"]}),p.addContextualMenuButton({key:"slotUnsharedButton",nameI18nKey:"slotcontextmenu.title.unshared.button",regexpKeys:["^.*Slot$"],action:{templateUrl:"slotUnsharedButtonWrapperTemplate.html"},permissions:["se.slot.context.menu.unshared.icon"]}),p.addContextualMenuButton({key:"se.slotSyncButton",nameI18nKey:"slotcontextmenu.title.sync.button",regexpKeys:["^.*Slot$"],action:{templateUrl:"slotSyncTemplate.html"},permissions:["se.sync.slot.context.menu"]}),p.addDecorator({key:"syncIndicator",nameI18nKey:"syncIndicator",permissions:["se.sync.slot.indicator"]}),p.register({key:"disableSharedSlotEditing",nameI18nKey:"se.cms.disableSharedSlotEditing",descriptionI18nKey:"se.cms.disableSharedSlotEditing.description",enablingCallback:function(){h.setSharedSlotEnablementStatus(!0)},disablingCallback:function(){h.setSharedSlotEnablementStatus(!1)}}),p.addDecorator({key:"sharedSlotDisabledDecorator",nameI18nKey:"se.cms.shared.slot.disabled.decorator",displayCondition:function(e,t){return Promise.all([S.isSlotEditable(t),s.isExternalComponent(t,e),h.isSlotShared(t)]).then(function(e){return!e[0]&&!e[1]&&e[2]})}}),p.addDecorator({key:"externalSlotDisabledDecorator",nameI18nKey:"se.cms.external.slot.disabled.decorator",displayCondition:function(e,t){return Promise.resolve(s.isExternalComponent(t,e))}}),p.addDecorator({key:"externalComponentDecorator",nameI18nKey:"se.cms.external.component.decorator",displayCondition:function(e,t){return Promise.resolve(s.isExternalComponent(t,e))}}),p.addContextualMenuButton({key:"clonecomponentbutton",priority:600,nameI18nKey:"se.cms.contextmenu.title.clone.component",i18nKey:"se.cms.contextmenu.title.clone.component",regexpKeys:["^((?!Slot).)*$"],condition:function(e){var n=e.componentAttributes.smarteditComponentUuid;if(!e.isComponentHidden){var o=s.getParentSlotForComponent(e.element);return S.isSlotEditable(o).then(function(o){return!!o&&I.hasCreatePermissionForTypes([e.componentType]).then(function(o){return o[e.componentType]?f.getById(n).then(function(e){return e.cloneable}):t.when(!1)})})}return y.getById(n).then(function(e){return e.cloneable})},action:{callback:function(e){var t=s.getComponentPositionInSlot(e.slotId,e.componentAttributes.smarteditComponentId);g.cloneExistingComponentToSlot({targetSlotId:e.slotId,dragInfo:{componentId:e.componentAttributes.smarteditComponentId,componentType:e.componentType,componentUuid:e.componentAttributes.smarteditComponentUuid},position:t+1})}},displayClass:"clonebutton",displayIconClass:"sap-icon--duplicate",displaySmallIconClass:"sap-icon--duplicate",permissions:["se.clone.component"]})}]})],Cmssmartedit)}(),O=n(50),R=n(51),P=n(5);window.__smartedit__.addDecoratorPayload("Component","SyncIndicatorDecorator",{selector:"sync-indicator",template:n(46)});var A=function(e){function SyncIndicatorDecorator(t,n,o,i,r,s,a){var c=e.call(this)||this;return c.$q=t,c.catalogService=n,c.slotSynchronizationService=o,c.crossFrameEventService=i,c.pageInfoService=r,c.SYNCHRONIZATION_STATUSES=s,c.SYNCHRONIZATION_POLLING=a,c.isVersionNonActive=!1,c}var t,r,s,a,c,l;return SyncIndicatorDecorator.$inject=["$q","catalogService","slotSynchronizationService","crossFrameEventService","pageInfoService","SYNCHRONIZATION_STATUSES","SYNCHRONIZATION_POLLING"],o.__extends(SyncIndicatorDecorator,e),SyncIndicatorDecorator.prototype.ngOnInit=function(){var e=this;this.syncStatus={status:this.SYNCHRONIZATION_STATUSES.UNAVAILABLE},this.pageInfoService.getPageUUID().then(function(t){e.pageUUID=t,e.unRegisterSyncPolling=e.crossFrameEventService.subscribe(e.SYNCHRONIZATION_POLLING.FAST_FETCH,e.fetchSyncStatus.bind(e)),e.catalogService.isContentCatalogVersionNonActive().then(function(t){e.isVersionNonActive=t,e.isVersionNonActive&&e.fetchSyncStatus()})})},SyncIndicatorDecorator.prototype.ngOnDestroy=function(){this.unRegisterSyncPolling&&this.unRegisterSyncPolling()},SyncIndicatorDecorator.prototype.fetchSyncStatus=function(){var e=this;return this.isVersionNonActive?this.slotSynchronizationService.getSyncStatus(this.pageUUID,this.componentAttributes.smarteditComponentId).then(function(t){e.syncStatus=t},function(){e.syncStatus.status=e.SYNCHRONIZATION_STATUSES.UNAVAILABLE}):this.$q.when()},SyncIndicatorDecorator=o.__decorate([Object(i.SeDecorator)(),Object(P.Component)({selector:"sync-indicator",template:n(46)}),o.__param(0,Object(P.Inject)("$q")),o.__param(2,Object(P.Inject)("slotSynchronizationService")),o.__param(4,Object(P.Inject)("pageInfoService")),o.__param(5,Object(P.Inject)("SYNCHRONIZATION_STATUSES")),o.__param(6,Object(P.Inject)("SYNCHRONIZATION_POLLING")),o.__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof angular&&angular.IQService)?t:Object,"function"==typeof(r=void 0!==i.ICatalogService&&i.ICatalogService)?r:Object,Object,"function"==typeof(s=void 0!==i.CrossFrameEventService&&i.CrossFrameEventService)?s:Object,"function"==typeof(a=void 0!==i.IPageInfoService&&i.IPageInfoService)?a:Object,"function"==typeof(c=void 0!==i.TypedMap&&i.TypedMap)?c:Object,"function"==typeof(l=void 0!==i.TypedMap&&i.TypedMap)?l:Object])],SyncIndicatorDecorator)}(i.AbstractDecorator),N=(n(87),function(){function CmssmarteditModule(){}return CmssmarteditModule=o.__decorate([Object(i.SeEntryModule)("cmssmartedit"),Object(P.NgModule)({imports:[r.CmsCommonsModule,O.BrowserModule,R.UpgradeModule],declarations:[A],entryComponents:[A],providers:[i.diBridgeUtils.upgradeProvider("$q"),i.diBridgeUtils.upgradeProvider("catalogService",i.ICatalogService),i.diBridgeUtils.upgradeProvider("slotSynchronizationService"),i.diBridgeUtils.upgradeProvider("pageInfoService"),i.diBridgeUtils.upgradeProvider("SYNCHRONIZATION_STATUSES"),i.diBridgeUtils.upgradeProvider("SYNCHRONIZATION_POLLING")]})],CmssmarteditModule)}())},function(e,t,n){e.exports=n(7)(65)}]);